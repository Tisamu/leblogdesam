<!doctype html><html lang=fr dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Comment j'ai Dev mon Blog 🌐 | Le blog de Sam</title><meta name=keywords content="Dev,Guide"><meta name=description content="TL;DR Pour faire ce blog, j&rsquo;ai utilisé GitHub Actions + Pages, j&rsquo;ai un repo privé qui contient le code source du blog, un pipeline qui build le blog et envoi le code statique sur un repo publique, qui lui est exposé par GitHub Pages.
Et par-dessus, j&rsquo;ai mon nom de domaine leblogdesam.net qui redirige dessus.
Ici, j&rsquo;explique tout avec un peu plus de détails pour pouvoir le reproduire chez soi facilement."><meta name=author content><link rel=canonical href=https://www.leblogdesam.net/posts/comment-jai-dev-mon-blog/><link crossorigin=anonymous href=/assets/css/stylesheet.387af320d23f235feae622b1492c9c57f58f8909e9b5847c75f6f87ff4cc60c5.css integrity="sha256-OHrzINI/I1/q5iKxSSycV/WPiQnptYR8dfb4f/TMYMU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.leblogdesam.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.leblogdesam.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.leblogdesam.net/favicon-32x32.png><link rel=apple-touch-icon href=https://www.leblogdesam.net/apple-touch-icon.png><link rel=mask-icon href=https://www.leblogdesam.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Comment j'ai Dev mon Blog 🌐"><meta property="og:description" content="TL;DR Pour faire ce blog, j&rsquo;ai utilisé GitHub Actions + Pages, j&rsquo;ai un repo privé qui contient le code source du blog, un pipeline qui build le blog et envoi le code statique sur un repo publique, qui lui est exposé par GitHub Pages.
Et par-dessus, j&rsquo;ai mon nom de domaine leblogdesam.net qui redirige dessus.
Ici, j&rsquo;explique tout avec un peu plus de détails pour pouvoir le reproduire chez soi facilement."><meta property="og:type" content="article"><meta property="og:url" content="https://www.leblogdesam.net/posts/comment-jai-dev-mon-blog/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-30T20:00:04+02:00"><meta property="article:modified_time" content="2023-06-30T20:00:04+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Comment j'ai Dev mon Blog 🌐"><meta name=twitter:description content="TL;DR Pour faire ce blog, j&rsquo;ai utilisé GitHub Actions + Pages, j&rsquo;ai un repo privé qui contient le code source du blog, un pipeline qui build le blog et envoi le code statique sur un repo publique, qui lui est exposé par GitHub Pages.
Et par-dessus, j&rsquo;ai mon nom de domaine leblogdesam.net qui redirige dessus.
Ici, j&rsquo;explique tout avec un peu plus de détails pour pouvoir le reproduire chez soi facilement."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.leblogdesam.net/posts/"},{"@type":"ListItem","position":3,"name":"Comment j'ai Dev mon Blog 🌐","item":"https://www.leblogdesam.net/posts/comment-jai-dev-mon-blog/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Comment j'ai Dev mon Blog 🌐","name":"Comment j\u0027ai Dev mon Blog 🌐","description":"TL;DR Pour faire ce blog, j\u0026rsquo;ai utilisé GitHub Actions + Pages, j\u0026rsquo;ai un repo privé qui contient le code source du blog, un pipeline qui build le blog et envoi le code statique sur un repo publique, qui lui est exposé par GitHub Pages.\nEt par-dessus, j\u0026rsquo;ai mon nom de domaine leblogdesam.net qui redirige dessus.\nIci, j\u0026rsquo;explique tout avec un peu plus de détails pour pouvoir le reproduire chez soi facilement.","keywords":["Dev","Guide"],"articleBody":" TL;DR Pour faire ce blog, j’ai utilisé GitHub Actions + Pages, j’ai un repo privé qui contient le code source du blog, un pipeline qui build le blog et envoi le code statique sur un repo publique, qui lui est exposé par GitHub Pages.\nEt par-dessus, j’ai mon nom de domaine leblogdesam.net qui redirige dessus.\nIci, j’explique tout avec un peu plus de détails pour pouvoir le reproduire chez soi facilement.\nIntroduction Vous allez voir que “Dev”, c’est un grand mot,\nc’est surtout de la config, il suffit de connaitre les bases de git, savoir manipuler github et le reste se déroule presque tout seul. 👍\nLe choix des technos Première étape, trouver les bons outils.\nJe savais déjà que je voulais pouvoir écrire mes articles en Markdown pour pouvoir me concentrer sur le contenu plus que sur la forme.\nEt aussi, je voulais un outil simple à déployer, sans base de données ou ce genre de trucs, mon besoin actuel, c’est écrire et publier du contenu sur le web, donc je reste YAGNI (👀) et me concentre sur ces points.\nJe savais déjà que des solutions de déploiement de sites statiques existaient et étaient appréciées par les créateurs de contenus ou dans l’événementiel.\nDonc je tape quelque chose comme “Best static website generator” sur mon browser, et après quelques recherches je tombe sur Hugo . 😯\nBingo, pile ce que je recherchais :\n✅ Structure simple.\n✅ Facile à personnaliser, avec plein de thèmes.\n✅ Se déploie en statique.\n✅ Contenu en markdown.\n✅ Communauté présente.\nHugo + PaperMod PaperMod est un thème pour Hugo, enfin un “supertheme” pour être plus précis puisqu’il ajoute quelques features intéressantes pour inclure un dark mode, une petite bio, des liens vers les réseaux, le temps de lecture des articles et plein d’autres choses que je n’ai pas encore exploré. 😄\nEt du coup, t’as codé quoi pour l’instant ? 🤔 Rien du tout.\nBeh oui, c’est juste quelques commandes pour setup Hugo (le getting started en gros) et cloner le repo PaperMod dans le dossier /themes .\nLe seul truc un peu tricky, c’est que j’ai cloné PaperMod sans l’inclure comme un submodule git, car je voulais qu’il soit présent en flat dans mon projet, choix arbitraire et personnel. 😛\nDu coup bah techniquement, c’est déjà fonctionnel hein. 🙂\nPersonnalisation et peaufinage Il y a quelques détails que je voulais quand même ajouter. 🤓\nDéjà, les infos me concernant, le nom du blog, quelques lignes de présentation et des liens vers mes réseaux pour me contacter plus facilement. 👍\nTout ça se passe dans le fichier de config d’hugo (hugo.yml), avec un objet params proposé par paperMod qui permet d’étoffer cette config.\nparams: homeInfoParams: Title: Bienvenue sur Le Blog de Sam 👋 Content: | 🚧 En cours de construction... 🚧 - ➡️ Ici on parle tech, gestion de projet, retours d'expériences, management, dev perso et plus encore - ➡️ Un TLDR pour chaque article - ➡️ ~ Un article par semaine - ➡️ Etc Puis le thème détecte ces changements automatiquement et adapte la mise en page avec ces infos. 😃\nEnsuite, un truc important pour moi : le temps de lecture, pour que sur chaque article, on puisse voir le temps de lecture à prévoir pour l’article à côté de sa date.\nEt pour ça, PaperMod intègre déjà un calcul automatique, il suffit d’activer l’affichage de l’info dans le fichier de params via ShowReadingTime: true\nEt Tada, le reading time est affiché ! 🎉 Autre chose, j’aimerais que quand une image apparait, je puisse la zoomer d’un clic, pour les schémas et ce genre de choses par exemple.\nPour ce faire, j’ai trouvé sur le net un bout de code à mettre dans layouts/partials/extend_footer.htmtl\n{{- /* Footer custom content area start */ -}} {{- /* Insert any custom code web-analytics, resources, etc. here */ -}} \u003cscript src=\"https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js\" integrity=\"sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"\u003e\u003c/script\u003e \u003cscript\u003e const images = Array.from(document.querySelectorAll(\".post-content img\")); images.forEach(img =\u003e { mediumZoom(img, { margin: 0, /* The space outside the zoomed image */ scrollOffset: 40, /* The number of pixels to scroll to close the zoom */ container: null, /* The viewport to render the zoom in */ template: null /* The template element to display on zoom */ }); }); \u003c/script\u003e {{- /* Footer custom content area end */ -}} Grâce à ça (et un petit bout de CSS pour le comportement en mode Dark), j’ai des images zoomables. 👍\nEt pour finir, des petits ajouts comme une table des matières, boutons de partages et un bouton copier le code pour faciliter la navigation dans les articles.\nLà, j’ajoute simplement\nShowToc: true ShowShareButtons: true ShowCodeCopyButtons: true Dans le fichier params, et bim :\nBien joué, aller apéro. 🍺\nOui bon effectivement. 👀\nUn autre truc que je vois souvent sur les contenus open sources ou indépendant :\nle bouton pour tipper (= donner un pour boire) le créateur, et celui que je préfère, c’est “Buy me a coffee”, donc je me prête au jeu et vais donc créer cette petite page Buy me a Coffee, et là, je vois qu’en intégrant le bouton, on peut le personnaliser 🤩, je le customise donc pour qu’il soit un peu plus à mon image (🍺) et copie colle fournit par le site dans le footer.html du thème pour voir ce que ça donne.\nBon ok, il faut juste l’aligner, alors un petit coup de flex et margin auto, et on est bon :\nBon, à ce stade, je suis satisfait et je commence à écrire mon premier article pour présenter mon blog et je me rends compte que quand je clique sur un lien, ça ne l’ouvre pas dans un nouvel onglet, et ça, ça m’énerve fort. 😠\nDu coup je cherche un peu et en fait, il me suffit de créer un petit fichier pour le markup d’un lien que j’ai placé dans un nouveau fichier themes/PaperMod/layouts/_default/_markup/render-link.html, et hop, problème résolu. 🙂\n\u003ca href=\"{{ .Destination | safeURL }}\"{{ with .Title}} title=\"{{ . }}\"{{ end }}{{ if strings.HasPrefix .Destination \"http\" }} target=\"_blank\" rel=\"noopener\"{{ end }}\u003e{{ .Text | safeHTML }}\u003c/a\u003e Et en gros la v1 de mon blog est prête, et ça donne ce que vous avez à l’écran actuellement. 🎉\nNon non je vous en prie, asseyez-vous, il nous reste encore un beau morceau. 😁\nLe déploiement 🚀 Et oui, c’est cool, mais maintenant, il faut le déployer. 😬\nC’est une étape qui peut faire peur aux devs, mais ce n’est pas si compliqué de déployer un site statique aujourd’hui, je vais vous montrer la méthode que j’utilise pour le blog et que je trouve la plus optimale pour faire ça automatiquement et gratuitement. 👍\n(Je vous mets un petit schéma qui récapitule tout ça plus bas car c’est un peu tricky, accrochez-vous. 😉) Plusieurs solutions D’abord, il faut savoir qu’il y a plusieurs solutions pour héberger son site, la première, la plus traditionnelle, est d’utiliser un webserver type nginx ou apache pour faire pointer notre nom de domaine vers le bon dossier sur un serveur dédié ou un VPS.\nMais ça demande pas mal de connaissance, notamment gérer un serveur, savoir comment sécuriser ce dernier, installer un certificat SSL ou certbot etc… 😩\nDonc même si j’ai ces compétences, bah flemme, je veux une solution simple, aujourd’hui, il y en a pas mal du genre Static.app ou Vercel , mais ils demandent un peu de config et le tiers gratuit est vite limité notamment pour les noms de domaine. 😕\nMais il existe encore une autre solution gratuite en tout point : GitHub Pages ! 🤩\nSeul inconvénient, il faut utiliser GitHub comme repo (déso les fans de GitLab 👀) et surtout il faut ouvrir publiquement le code du repository qui héberge le code à exposer sur le net.\nBah alors moi ça me gêne car je voudrais pouvoir sauvegarder mes drafts et pas révéler tout mon petit code de mon blog en exposant la version build, d’autant que la version build ne fait pas vraiment partie de mon code, donc pas envie qu’elle soit dans le repo… 🤔\nNon mais il y a une solution, pas de panique, il suffit (tenez vous bien) d’avoir un repo qui n’expose QUE le code statique, donc /public, et activer GitHub pages dessus. 🥳\nPour faire ça et l’automatiser, fastoche, l’idée est que quand je push sur mon repo privé avec mes nouveaux articles (sur la branche main donc), bah le repo publique se met à jour tout seul avec le code statique de mon blog…. oui facile à dire, j’en conviens. 😝\nGitHub Actions à la rescousse GitHub Actions c’est le CI/CD de GitHub, c’est des petites machines qui peuvent faire plein d’étapes de script, pour valider l’état des branches en passant des tests unitaires, automatiser des déploiements, ce genre de choses…\nDans GitHub Actions, on peut faire un peu ce qu’on veut, et c’est ce qui est intéressant. 👍\nDu coup moi ce que je veux, c’est que quand je push sur la main, la pipeline build le blog (avec le CLI hugo) et push le dossier public qui vient d’être généré sur le repo publique. ✔️\nDonc après avoir créé un repo publique leblogdesam sur GitHub, je vais aller sur mon repo priver préparer le CI/CD :\nPour préparer le pipeline, il faut placer un fichier main.yml (qui correspond au nom de la branche cible) à un emplacement spécifique (.github/workflows/main.yml) du projet pour qu’il soit prit en compte, et dedans, j’ai mis ce code :\n# /.github/workflows/main.yml name: Blog Deployment on: workflow_dispatch: push: jobs: build: name: Build and Deploy runs-on: ubuntu-latest permissions: write-all steps: - name: 🛒 Checkout uses: actions/checkout@v3 with: persist-credentials: false - name: ✨ Setup Hugo env: HUGO_VERSION: 0.114.0 run: | mkdir ~/hugo cd ~/hugo curl -L \"https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz\" --output hugo.tar.gz tar -xvzf hugo.tar.gz sudo mv hugo /usr/local/bin - name: 🛠️ Build run: hugo --minify - name: 🚀 Deploy env: DOMAIN: www.leblogdesam.net run: | cd public git config --global init.defaultBranch main git init git config user.name \"Samuel NAIT\" git config user.email \"nait.samuel@gmail.com\" git remote add origin https://Tisamu:${{ secrets.GH_TOKEN }}@github.com/Tisamu/leblogdesam.git echo \"${DOMAIN}\" \u003e CNAME git add -f ./ git commit -m \"🚀 Deploy the blog\" git push origin HEAD:main --force (Oui bah, j’avais dit que ce serait un peu plus technique. 👀)\nOk, on y va par étape :\nname: Blog Deployment on: workflow_dispatch: push: jobs: build: name: Build and Deploy runs-on: ubuntu-latest permissions: write-all steps: - name: 🛒 Checkout uses: actions/checkout@v3 with: persist-credentials: false - name: ✨ Setup Hugo env: HUGO_VERSION: 0.114.0 run: | mkdir ~/hugo cd ~/hugo curl -L \"https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz\" --output hugo.tar.gz tar -xvzf hugo.tar.gz sudo mv hugo /usr/local/bin D’abord je définis le pipeline, et je dis qu’il se déclenche (trigger) quand on push sur la main.\n(C’est la partie on:)\nEnsuite la première étape (steps) c’est de checkout, c’est un job de GitHub Actions qui lui permet de récupérer le repo du projet, tout simplement.\nEnsuite on va récupérer le livrable d’Hugo, et l’installer pour pouvoir builder le projet (l’étape ✨ Setup Hugo). 👍\nEt pour finir :\n- name: 🛠️ Build run: hugo --minify - name: 🚀 Deploy env: DOMAIN: www.leblogdesam.net run: | cd public git config --global init.defaultBranch main git init git config user.name \"Samuel NAIT\" git config user.email \"nait.samuel@gmail.com\" git remote add origin https://Tisamu:${{ secrets.GH_TOKEN }}@github.com/Tisamu/leblogdesam.git echo \"${DOMAIN}\" \u003e CNAME git add -f ./ git commit -m \"🚀 Deploy the blog\" git push origin HEAD:main --force Là, on build le blog, donc on génère le dossier public grâce à la commande hugo --minify.\nEt on va dans ce dossier, on en fait un repo git (git init etc …) et on le branche sur notre repo publique distant en utilisant un token d’API GitHub ${{ secrets.GH_TOKEN }} (que j’ai généré et indiqué dans les settings du Repository privé, celui qui porte ce pipeline).\nEt enfin, il commit et push sur le repo publique, avant ça on voit une petite étape echo \"${DOMAIN}\" \u003e CNAME, je vais y revenir plus loin, c’est pour faire pointer mon nom de domaine www.leblogdesam.net sur le GitHub pages du repo. 👀\nEt voilà, à ce stade, dès que je push sur mon repo privé, ça déclenche tout ça et ça fini dans mon repo publique ! 🎉\nLe petit schéma comme promis Vous pouvez voir le schéma en full size ici (Petite cafouille entre le nom du dossier public / static mais je suis sûr que vous me pardonnerez. 🥲)\nGitHub Pages À ce stade, on a tout ce qu’il faut pour rendre notre site visible.\nC’est donc du côté du repo public, dans la catégorie “GitHub Pages” qu’il ne nous reste plus qu’à activer ce dernier. 😁\nDonc là, on fait référence à la partie en haut à droite du schéma, dans Settings \u003e Pages.\nVous verrez que quand vous l’activez, vous pouvez déjà y accéder via votre url github pages fournie par GitHub.\nNom de domaine personnalisé Mais si vous voulez utiliser un nom de domaine personnalisé comme moi, ça va vous demander un chouïa plus de connaissances. 🙂\nConfigurer son nom de domaine Je ne vais pas aller en détails sur le fonctionnement des DNS et noms de domaines, (j’en ferais peut-être un article si ça vous intéresse), mais là ce qui compte, c’est de vous trouver un fournisseur et un nom de domaine.\nPerso, je ne jure que par OVH pour ça, mais c’est simplement par habitude, si vous cherchez “Acheter nom de domaine” sur Google vous en trouverez plein d’autres, et certainement moins chers. 👍\nDonc pour faire mes emplettes, je vais donc sur OVH, et je commande mon petit nom de domaine (process d’achat standard d’internet, pas de surprises.)\nUne fois votre nom de domaine acheté, il faut attendre un peu qu’il soit activé.\nUne fois dispo, vous le retrouverez sur votre espace Web Cloud, et là vous pourrez tout brancher.\nComment ça marche ? Petite parenthèse tech : pour que votre site soit visible sur votre nom de domaine, il faut le rediriger (ou faire pointer) dessus.\nUn nom de domaine peut avoir autant de sous domaines que vous voulez : leblogdesam.net est le nom de domaine (ou domaine parent), la partie www de www.leblogdesam.net est un sous domaine www du domaine leblogdesam.net\nSi un jour je dev une API pour le blog, elle sera certainement hébergée ssur le sous domaine api et sera donc pointée par api.leblogdesam.net. 👍\nVoilà pour la structure d’un nom de domaine. 🙂\nConcernant les enregistrements de redirection, il y en a plusieurs types : A, AAAA, TXT et CNAME pour les principales, mais il y en a plein d’autres encore dont on se fiche…\nAlors, intuitif hein ? 😎\nJe vous l’accorde en effet, pour faire simple :\nA = Redirection sur une IPv4, port 80 en http et 443 en https. AAAA = Pareil mais avec une IPv6 CNAME = Redirection canonique, en gros, c’est un alias qui pointe vers un autre nom de domaine TXT = Un type flexible, car il prend du plain text, il permet de communiquer des informations aux serveurs DNS ou permettre des redirections pour des outils type analytics, ou bien des redirections entre sous domaines de notre domaine, ce genre de choses. Donc là pour savoir sur quoi pointer, on peut retourner côté GitHub et activer Pages, et mettre notre nom de domaine dans “Custom Domain” :\n(vous pouvez cocher “Enforce HTTPS” pour forcer l’utilisation du https au passage, ça ne coute rien 😉). Et là, l’important c’est que Pages nous dit “Custom domains allow you to serve your site from a domain other than .github.io”\nEt ça, ça veut dire qu’on veut que notre domaine pointe sur le domaine .github.io, donc si vous avez bien suivie, on veut une redirection… CNAME !\nDu coup pour ce faire, on peut retourner sur OVH et aller modifier la zone DNS de notre nom de domaine :\nVous aurez un peu de nettoyage à faire, car la plupart du temps OVH vous fournit quelques redirections vers les pages par défaut OVH qui ne vous serviront plus.\nMais là si on regarde la liste, on voit qu’il ne me reste que deux redirections NS (pour les serveurs DNS d’OVH, faut pas y toucher), deux MX (indispensable au fonctionnement du serveur mail, je vous conseille de les garder),\nEnsuite, plus intéressant, une TXT pour rediriger le domaine parent vers le sous domaine www.\nEt enfin ma redirection CNAME de www vers mon domaine github pages.\n(N’oubliez pas d’ajouter un point “.” à la redirection, pour cloisonner l’enregistrement, genre .github.io. et pas juste .github.io, OVH le fait automatiquement, mais pas sûr que ce soit pareil partout) 🫤\nC’est possible que côté Pages, il reste en mode “checking …”, voire qu’il vous dise que c’est “improperly configured” mais ce n’est rien, de mon côté ça fait ça et ça fonctionne quand même 👀\nLe fichier CNAME Tout à l’heure, on a vu un fichier CNAME dans nos histoires de pipeline, je vous ai dit qu’on y reviendrait.\nPour faire simple, quand vous activez Pages, il ajoute ce fichier à la racine de votre repo pour indiquer aux serveurs Github Pages comment traiter la redirection.\nPar défaut, il contient une IP de serveur github pages, mais une fois le nom de domaine configuré, il contient le nom de domaine en question. 👍\nSeulement, vu que ce fichier est indispensable au branchement du nom de domaine, on doit s’assurer de ne pas le supprimer quand on push notre repo, sinon 💥 plus de site !\nC’est pour cela que je le recrée dans le pipeline GitHub Actions “à la main” à chaque deploy. 🙂\nConclusion En bref, pour moi cette solution est un nobrainer car facile à comprendre, mettre en place et aucune maintenance. 😎\nIci, j’ai essayé de vous l’expliquer avec un format entre le tuto détaillé et le guide pratique, j’espère que cette solution vous a séduit et vous donnera envie de mettre en ligne tout plein de sites facilement. 😁\nÀ la prochaine ! 👋\n","wordCount":"3000","inLanguage":"fr","datePublished":"2023-06-30T20:00:04+02:00","dateModified":"2023-06-30T20:00:04+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.leblogdesam.net/posts/comment-jai-dev-mon-blog/"},"publisher":{"@type":"Organization","name":"Le blog de Sam","logo":{"@type":"ImageObject","url":"https://www.leblogdesam.net/favicon.ico"}}}</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){t="https://leblogdesam.matomo.cloud/",_paq.push(["setTrackerUrl",t+"matomo.php"]),_paq.push(["setSiteId","1"]);var t,n=document,e=n.createElement("script"),s=n.getElementsByTagName("script")[0];e.async=!0,e.src="//cdn.matomo.cloud/leblogdesam.matomo.cloud/matomo.js",s.parentNode.insertBefore(e,s)}()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//matomo.leblogdesam.net/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.leblogdesam.net accesskey=h title="Le blog de Sam (Alt + H)">Le blog de Sam</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.leblogdesam.net/tags title=Tags><span>Tags</span></a></li><li><a href=https://www.leblogdesam.net/politique-confidentialite title="Politique de confidentialité"><span>Politique de confidentialité</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Comment j'ai Dev mon Blog 🌐</h1><div class=post-meta><span title='2023-06-30 20:00:04 +0200 +0200'>30 juin 2023</span>&nbsp;·&nbsp;15 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table des matières</span></summary><div class=inner><ul><li><a href=#introduction aria-label=Introduction>Introduction</a></li><li><a href=#le-choix-des-technos aria-label="Le choix des technos">Le choix des technos</a><ul><li><a href=#hugo--papermod aria-label="Hugo + PaperMod">Hugo + PaperMod</a></li><li><a href=#et-du-coup-tas-cod%c3%a9-quoi-pour-linstant-- aria-label="Et du coup, t&amp;rsquo;as codé quoi pour l&amp;rsquo;instant ? 🤔">Et du coup, t&rsquo;as codé quoi pour l&rsquo;instant ? 🤔</a></li><li><a href=#personnalisation-et-peaufinage aria-label="Personnalisation et peaufinage">Personnalisation et peaufinage</a></li></ul></li><li><a href=#le-d%c3%a9ploiement- aria-label="Le déploiement 🚀">Le déploiement 🚀</a><ul><li><a href=#plusieurs-solutions aria-label="Plusieurs solutions">Plusieurs solutions</a></li><li><a href=#github-actions-%c3%a0-la-rescousse aria-label="GitHub Actions à la rescousse">GitHub Actions à la rescousse</a></li><li><a href=#le-petit-sch%c3%a9ma-comme-promis aria-label="Le petit schéma comme promis">Le petit schéma comme promis</a></li><li><a href=#github-pages aria-label="GitHub Pages">GitHub Pages</a></li></ul></li><li><a href=#nom-de-domaine-personnalis%c3%a9 aria-label="Nom de domaine personnalisé">Nom de domaine personnalisé</a><ul><li><a href=#configurer-son-nom-de-domaine aria-label="Configurer son nom de domaine">Configurer son nom de domaine</a></li><li><a href=#comment-%c3%a7a-marche- aria-label="Comment ça marche ?">Comment ça marche ?</a></li><li><a href=#le-fichier-cname aria-label="Le fichier CNAME">Le fichier CNAME</a></li></ul></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li></ul></div></details></div><div class=post-content><blockquote><p><details><summary markdown=span>TL;DR</summary>
<i><p>Pour faire ce blog, j&rsquo;ai utilisé GitHub Actions + Pages, j&rsquo;ai un repo privé qui contient le code source du blog, un pipeline
qui build le blog et envoi le code statique sur un repo publique, qui lui est exposé par GitHub Pages.</p><p>Et par-dessus, j&rsquo;ai mon nom de domaine leblogdesam.net qui redirige dessus.</p><p>Ici, j&rsquo;explique tout avec un peu plus de détails pour pouvoir le reproduire chez soi facilement.</p></i></details></p></blockquote><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>Vous allez voir que &ldquo;Dev&rdquo;, c&rsquo;est un grand mot,<br>c&rsquo;est surtout de la config, il suffit de connaitre les bases de git, savoir manipuler github et le reste se déroule presque tout seul. 👍</p><h2 id=le-choix-des-technos>Le choix des technos<a hidden class=anchor aria-hidden=true href=#le-choix-des-technos>#</a></h2><p>Première étape, trouver les bons outils.<br>Je savais déjà que je voulais pouvoir écrire mes articles en <strong>Markdown</strong> pour pouvoir me concentrer sur le contenu plus que sur la forme.</p><p>Et aussi, je voulais un outil <strong>simple à déployer</strong>, sans base de données ou ce genre de trucs,
mon besoin actuel, c&rsquo;est écrire et publier du contenu sur le web, donc je reste <em>YAGNI</em> (👀) et me concentre sur ces points.</p><p>Je savais déjà que des solutions de déploiement de sites statiques existaient et étaient appréciées
par les créateurs de contenus ou dans l&rsquo;événementiel.</p><p>Donc je tape quelque chose comme &ldquo;Best static website generator&rdquo; sur mon browser,
et après quelques recherches je tombe sur <strong><a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a>
</strong>. 😯</p><p><img loading=lazy src=/images/gifs/yes-nerd.gif alt="Yes !"></p><p>Bingo, pile ce que je recherchais :</p><p>✅ Structure simple.<br>✅ Facile à personnaliser, avec plein de thèmes.<br>✅ Se déploie en statique.<br>✅ Contenu en markdown.<br>✅ Communauté présente.</p><h3 id=hugo--papermod>Hugo + PaperMod<a hidden class=anchor aria-hidden=true href=#hugo--papermod>#</a></h3><p><a href=https://github.com/adityatelange/hugo-PaperMod target=_blank rel=noopener>PaperMod</a>
est <strong>un thème</strong> pour Hugo,
enfin un &ldquo;supertheme&rdquo; pour être plus précis puisqu&rsquo;il ajoute quelques features intéressantes pour inclure un dark mode,
une petite bio, des liens vers les réseaux,
le temps de lecture des articles et plein d&rsquo;autres choses que je n&rsquo;ai pas encore exploré. 😄</p><h3 id=et-du-coup-tas-codé-quoi-pour-linstant-->Et du coup, t&rsquo;as codé quoi pour l&rsquo;instant ? 🤔<a hidden class=anchor aria-hidden=true href=#et-du-coup-tas-codé-quoi-pour-linstant-->#</a></h3><p><strong>Rien du tout.</strong></p><p>Beh oui, c&rsquo;est juste quelques commandes pour setup Hugo (le getting started en gros) et cloner le repo PaperMod dans le dossier <code>/themes</code> .</p><p>Le seul truc un peu tricky, c&rsquo;est que j&rsquo;ai cloné PaperMod sans l&rsquo;inclure comme un submodule git, car je voulais qu&rsquo;il soit présent en flat dans mon projet,
choix arbitraire et personnel. 😛</p><p>Du coup bah techniquement, <strong>c&rsquo;est déjà fonctionnel</strong> hein. 🙂</p><p><img loading=lazy src=/images/gifs/arthur-sinon.gif alt=arthur-sinon.gif></p><h3 id=personnalisation-et-peaufinage>Personnalisation et peaufinage<a hidden class=anchor aria-hidden=true href=#personnalisation-et-peaufinage>#</a></h3><p>Il y a quelques détails que je voulais quand même ajouter. 🤓</p><p><strong>Déjà, les infos me concernant, le nom du blog,
quelques lignes de présentation et des liens vers mes réseaux pour me contacter plus facilement.</strong> 👍</p><p>Tout ça se passe dans le fichier de config d&rsquo;hugo (<code>hugo.yml</code>), avec un objet <code>params</code> proposé par paperMod qui permet d&rsquo;étoffer cette config.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>params</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>homeInfoParams</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Title</span>: <span style=color:#ae81ff>Bienvenue sur Le Blog de Sam 👋</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Content</span>: <span style=color:#ae81ff>| </span>
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>🚧 En cours de construction... 🚧</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>➡️ Ici on parle tech, gestion de projet, retours d&#39;expériences, management, dev perso et plus encore</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>➡️ Un TLDR pour chaque article</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>➡️ ~ Un article par semaine</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>➡️ Etc</span>
</span></span></code></pre></div><p>Puis le thème détecte ces changements automatiquement et adapte la mise en page avec ces infos. 😃</p><p><img loading=lazy src=/images/blog-bio.png alt="Screenshot du résultat"></p><p><strong>Ensuite</strong>, un truc important pour moi : <strong>le temps de lecture</strong>, pour que sur chaque article, on puisse voir le temps de lecture à prévoir pour l&rsquo;article à côté de sa date.</p><p>Et pour ça, PaperMod intègre déjà un calcul automatique, il suffit d&rsquo;activer l&rsquo;affichage de l&rsquo;info dans le fichier de params via <code>ShowReadingTime: true</code></p><p><strong>Et Tada, le reading time est affiché ! 🎉</strong>
<img loading=lazy src=/images/read-time.png alt="Screenshot reading time"></p><p>Autre chose, j&rsquo;aimerais que quand une image apparait, je puisse la zoomer d&rsquo;un clic, pour les schémas et ce genre de choses par exemple.</p><p>Pour ce faire, j&rsquo;ai trouvé sur le net un bout de code à mettre dans <code>layouts/partials/extend_footer.htmtl</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{- /* Footer custom content area start */ -}}
</span></span><span style=display:flex><span>{{- /*     Insert any custom code web-analytics, resources, etc. here */ -}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js&#34;</span> <span style=color:#a6e22e>integrity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==&#34;</span> <span style=color:#a6e22e>crossorigin</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;anonymous&#34;</span> <span style=color:#a6e22e>referrerpolicy</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;no-referrer&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>images</span> <span style=color:#f92672>=</span> Array.<span style=color:#a6e22e>from</span>(document.<span style=color:#a6e22e>querySelectorAll</span>(<span style=color:#e6db74>&#34;.post-content img&#34;</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>images</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#a6e22e>img</span> =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mediumZoom</span>(<span style=color:#a6e22e>img</span>, {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>margin</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#75715e>/* The space outside the zoomed image */</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>scrollOffset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>40</span>, <span style=color:#75715e>/* The number of pixels to scroll to close the zoom */</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>container</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>, <span style=color:#75715e>/* The viewport to render the zoom in */</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span> <span style=color:#75715e>/* The template element to display on zoom */</span>
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>{{- /* Footer custom content area end */ -}}
</span></span></code></pre></div><p>Grâce à ça (et un petit bout de CSS pour le comportement en mode Dark), j&rsquo;ai des images zoomables. 👍</p><p><strong>Et pour finir, des petits ajouts comme une table des matières, boutons de partages et un bouton copier le code</strong> pour faciliter la navigation
dans les articles.</p><p>Là, j&rsquo;ajoute simplement</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>ShowToc</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>ShowShareButtons</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>ShowCodeCopyButtons</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><p>Dans le fichier params, et bim :</p><p><img loading=lazy src=/images/toc.png alt="Table des matières">
<img loading=lazy src=/images/share-buttons.png alt="Boutons de partage">
Bien joué, aller apéro. 🍺</p><p><img loading=lazy src=/images/gifs/early-will-ferrell.gif alt=early-will-ferrell.gif></p><p>Oui bon effectivement. 👀</p><p>Un autre truc que je vois souvent sur les contenus open sources ou indépendant :<br>le bouton pour tipper <em>(= donner un pour boire)</em> le créateur,
et celui que je préfère, c&rsquo;est &ldquo;<strong>Buy me a coffee</strong>&rdquo;, donc je me prête au jeu et vais donc créer cette petite page Buy me a Coffee, et là, je vois qu&rsquo;en intégrant le bouton, on peut le personnaliser 🤩,
je le customise donc pour qu&rsquo;il soit un peu plus à mon image (🍺) et copie colle fournit par le site dans le <code>footer.html</code> du thème pour voir ce que ça donne.</p><p><img loading=lazy src=/images/bouton-bmc-decale.png alt="Screenshot du bouton qui se place mal sur la page"></p><p><img loading=lazy src=/images/gifs/probleme-finition.gif alt="On a un problème de finition"></p><p>Bon ok, il faut juste l&rsquo;aligner, alors un petit coup de flex et margin auto, et on est bon :</p><p><img loading=lazy src=/images/bouton-bmc-centre.png alt="Screenshot du bouton centré"></p><p>Bon, à ce stade, je suis satisfait et je commence à écrire mon premier article pour présenter mon blog et je me rends compte que <strong>quand je clique sur un lien,
ça ne l&rsquo;ouvre pas dans un nouvel onglet, et ça, ça m&rsquo;énerve fort.</strong> 😠</p><p>Du coup je cherche un peu et en fait, il me suffit de créer un petit fichier pour le markup d&rsquo;un lien que j&rsquo;ai placé dans un nouveau fichier <code>themes/PaperMod/layouts/_default/_markup/render-link.html</code>, et hop, problème résolu. 🙂</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ .Destination | safeURL }}&#34;</span><span style=color:#960050;background-color:#1e0010>{{</span> <span style=color:#a6e22e>with</span> <span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>Title</span><span style=color:#960050;background-color:#1e0010>}}</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ . }}&#34;</span><span style=color:#960050;background-color:#1e0010>{{</span> <span style=color:#a6e22e>end</span> <span style=color:#960050;background-color:#1e0010>}}{{</span> <span style=color:#a6e22e>if</span> <span style=color:#a6e22e>strings</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>HasPrefix</span> <span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>Destination</span>  <span style=color:#960050;background-color:#1e0010>&#34;</span><span style=color:#a6e22e>http</span><span style=color:#960050;background-color:#1e0010>&#34;</span> <span style=color:#960050;background-color:#1e0010>}}</span> <span style=color:#a6e22e>target</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;_blank&#34;</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;noopener&#34;</span><span style=color:#960050;background-color:#1e0010>{{</span> <span style=color:#a6e22e>end</span> <span style=color:#960050;background-color:#1e0010>}}</span>&gt;{{ .Text | safeHTML }}&lt;/<span style=color:#f92672>a</span>&gt;
</span></span></code></pre></div><p><strong>Et en gros la v1 de mon blog est prête, et ça donne ce que vous avez à l&rsquo;écran actuellement. 🎉</strong></p><p><img loading=lazy src=/images/gifs/bravo-applause.gif alt=Applaudissements></p><p>Non non je vous en prie, asseyez-vous, il nous reste encore un beau morceau. 😁</p><h2 id=le-déploiement->Le déploiement 🚀<a hidden class=anchor aria-hidden=true href=#le-déploiement->#</a></h2><p>Et oui, c&rsquo;est cool, mais maintenant, il faut le déployer. 😬</p><p>C&rsquo;est une étape qui peut faire peur aux devs, mais ce n&rsquo;est pas si compliqué de déployer un site statique aujourd&rsquo;hui,
<strong>je vais vous montrer la méthode que j&rsquo;utilise pour le blog et que je trouve la plus optimale pour faire ça automatiquement et gratuitement.</strong> 👍</p><p><strong>(Je vous mets un petit schéma qui récapitule tout ça plus bas car c&rsquo;est un peu tricky, accrochez-vous. 😉)</strong>
<img loading=lazy src=/images/gifs/kaamelott-fastoche-ou-pas.gif alt="C&amp;rsquo;est fastoche"></p><h3 id=plusieurs-solutions>Plusieurs solutions<a hidden class=anchor aria-hidden=true href=#plusieurs-solutions>#</a></h3><p>D&rsquo;abord, il faut savoir qu&rsquo;<strong>il y a plusieurs solutions pour héberger son site</strong>, la première, la plus traditionnelle, est d&rsquo;utiliser un webserver type nginx ou apache pour faire pointer notre nom de domaine vers le bon dossier sur un serveur dédié ou un VPS.</p><p>Mais ça demande pas mal de connaissance, notamment gérer un serveur, savoir comment sécuriser ce dernier, installer un certificat SSL ou certbot etc&mldr; 😩</p><p>Donc même si j&rsquo;ai ces compétences, <strong>bah flemme</strong>, je veux une solution simple, aujourd&rsquo;hui, il y en a pas mal du genre <a href=https://static.app/ target=_blank rel=noopener>Static.app</a>
ou <a href=https://vercel.com/ target=_blank rel=noopener>Vercel</a>
,
mais ils demandent un peu de config et le tiers gratuit est vite limité notamment pour les noms de domaine. 😕</p><p>Mais il existe encore une autre solution gratuite en tout point : <strong>GitHub Pages</strong> ! 🤩</p><p>Seul inconvénient, il faut utiliser GitHub comme repo (déso les fans de GitLab 👀) et surtout <strong>il faut ouvrir publiquement le code du repository qui héberge le code à exposer sur le net.</strong></p><p><img loading=lazy src=/images/gifs/kaamelott-et-alors.gif alt="Et alors ?"></p><p>Bah alors moi ça me gêne car je voudrais pouvoir sauvegarder mes drafts et pas révéler tout mon petit code de mon blog en exposant la version build, d&rsquo;autant que la version build ne fait pas vraiment partie de mon code, donc pas envie qu&rsquo;elle soit dans le repo&mldr; 🤔</p><p><img loading=lazy src=/images/gifs/kaamelott-on-est-pas-sortis-du-sable.gif alt="On est pas sortis du sable"></p><p>Non mais il y a une solution, pas de panique, il <strong>suffit</strong> (tenez vous bien) d&rsquo;avoir un repo qui n&rsquo;expose <strong>QUE</strong> le code statique,
donc <code>/public</code>, <strong>et activer GitHub pages dessus</strong>. 🥳</p><p>Pour faire ça et l&rsquo;automatiser, fastoche, l&rsquo;idée est que quand <strong>je push sur mon repo privé</strong> avec mes nouveaux articles (sur la branche <code>main</code> donc), bah <strong>le repo publique se met à jour tout seul</strong> avec le code statique de mon blog&mldr;. oui facile à dire, j&rsquo;en conviens. 😝</p><h3 id=github-actions-à-la-rescousse>GitHub Actions à la rescousse<a hidden class=anchor aria-hidden=true href=#github-actions-à-la-rescousse>#</a></h3><p>GitHub Actions c&rsquo;est le CI/CD de GitHub, c&rsquo;est des petites machines qui peuvent faire plein d&rsquo;étapes de script, pour valider l&rsquo;état des branches en passant des tests unitaires, automatiser des déploiements, ce genre de choses&mldr;</p><p><strong>Dans GitHub Actions, on peut faire un peu ce qu&rsquo;on veut</strong>, et c&rsquo;est ce qui est intéressant. 👍</p><p>Du coup moi <strong>ce que je veux, c&rsquo;est que quand je push</strong> sur la <code>main</code>, <strong>la pipeline build le blog</strong> (avec le CLI <code>hugo</code>) <strong>et push</strong> le dossier <code>public</code> qui vient d&rsquo;être généré <strong>sur le repo publique</strong>. ✔️</p><p>Donc après avoir créé un repo publique <code>leblogdesam</code> sur GitHub, je vais aller sur mon repo priver préparer le CI/CD :</p><p>Pour préparer le pipeline, il faut placer un fichier <code>main.yml</code> (qui correspond au nom de la branche cible) à un emplacement spécifique (<code>.github/workflows/main.yml</code>) du projet pour qu&rsquo;il soit prit en compte, et dedans, j&rsquo;ai mis ce code :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># /.github/workflows/main.yml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Blog Deployment</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>workflow_dispatch</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build and Deploy</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>permissions</span>: <span style=color:#ae81ff>write-all</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>🛒 Checkout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>persist-credentials</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>✨ Setup Hugo</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>HUGO_VERSION</span>: <span style=color:#ae81ff>0.114.0</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          mkdir ~/hugo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          cd ~/hugo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          curl -L &#34;https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz&#34; --output hugo.tar.gz
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          tar -xvzf hugo.tar.gz
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          sudo mv hugo /usr/local/bin          </span>          
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>🛠️ Build</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>🚀 Deploy</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>DOMAIN</span>: <span style=color:#ae81ff>www.leblogdesam.net</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          cd public
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git config --global init.defaultBranch main
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git init
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git config user.name &#34;Samuel NAIT&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git config user.email &#34;nait.samuel@gmail.com&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git remote add origin https://Tisamu:${{ secrets.GH_TOKEN }}@github.com/Tisamu/leblogdesam.git
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo &#34;${DOMAIN}&#34; &gt; CNAME
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git add -f ./
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git commit -m &#34;🚀 Deploy the blog&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git push origin HEAD:main --force</span>          
</span></span></code></pre></div><p>(Oui bah, j&rsquo;avais dit que ce serait un peu plus technique. 👀)</p><p><img loading=lazy src=/images/gifs/kaamelott-pas-pige-un-broc.gif alt=kaamelott-pas-pige-un-broc.gif></p><p>Ok, on y va par étape :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Blog Deployment</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>workflow_dispatch</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build and Deploy</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>permissions</span>: <span style=color:#ae81ff>write-all</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>🛒 Checkout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>persist-credentials</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>✨ Setup Hugo</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>HUGO_VERSION</span>: <span style=color:#ae81ff>0.114.0</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          mkdir ~/hugo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          cd ~/hugo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          curl -L &#34;https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz&#34; --output hugo.tar.gz
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          tar -xvzf hugo.tar.gz
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          sudo mv hugo /usr/local/bin          </span>          
</span></span></code></pre></div><p><strong>D&rsquo;abord je définis le pipeline</strong>, et je dis qu&rsquo;il se déclenche (trigger) quand on push sur la main.<br>(C&rsquo;est la partie <code>on:</code>)</p><p>Ensuite la première étape (<code>steps</code>) c&rsquo;est de <strong>checkout</strong>, c&rsquo;est un job de GitHub Actions qui lui permet de <strong>récupérer le repo du projet</strong>, tout simplement.</p><p>Ensuite <strong>on va récupérer le livrable d&rsquo;Hugo</strong>, et l&rsquo;installer pour pouvoir builder le projet (l&rsquo;étape <code>✨ Setup Hugo</code>). 👍</p><p>Et pour finir :</p><pre tabindex=0><code>      - name: 🛠️ Build
        run: hugo --minify

      - name: 🚀 Deploy
        env:
          DOMAIN: www.leblogdesam.net
        run: |
          cd public
          git config --global init.defaultBranch main
          git init
          git config user.name &#34;Samuel NAIT&#34;
          git config user.email &#34;nait.samuel@gmail.com&#34;
          git remote add origin https://Tisamu:${{ secrets.GH_TOKEN }}@github.com/Tisamu/leblogdesam.git
          echo &#34;${DOMAIN}&#34; &gt; CNAME
          git add -f ./
          git commit -m &#34;🚀 Deploy the blog&#34;
          git push origin HEAD:main --force
</code></pre><p>Là, <strong>on build le blog</strong>, donc on génère le dossier <code>public</code> grâce à la commande <code>hugo --minify</code>.</p><p>Et <strong>on va dans ce dossier, on en fait un repo git</strong> (<code>git init</code> etc &mldr;) et <strong>on le branche sur notre repo publique</strong> distant en utilisant un token d&rsquo;API GitHub <code>${{ secrets.GH_TOKEN }}</code>
(que j&rsquo;ai généré et indiqué dans les settings du Repository privé, celui qui porte ce pipeline).</p><p>Et enfin, <strong>il commit et push sur le repo publique</strong>, avant ça on voit une petite étape <code>echo "${DOMAIN}" > CNAME</code>, je vais y revenir plus loin, c&rsquo;est pour faire pointer mon nom de domaine <a href=https://www.leblogdesam.net target=_blank rel=noopener>www.leblogdesam.net</a>
sur le GitHub pages du repo. 👀</p><p><strong>Et voilà, à ce stade, dès que je push sur mon repo privé, ça déclenche tout ça et ça fini dans mon repo publique ! 🎉</strong></p><h3 id=le-petit-schéma-comme-promis>Le petit schéma comme promis<a hidden class=anchor aria-hidden=true href=#le-petit-schéma-comme-promis>#</a></h3><p>Vous pouvez voir le schéma en full size <a href=https://www.leblogdesam/images/schema.png target=_blank rel=noopener>ici</a>
<img loading=lazy src=/images/schema.png alt=schema.png></p><p>(Petite cafouille entre le nom du dossier public / static mais je suis sûr que vous me pardonnerez. 🥲)</p><h3 id=github-pages>GitHub Pages<a hidden class=anchor aria-hidden=true href=#github-pages>#</a></h3><p>À ce stade, on a tout ce qu&rsquo;il faut pour rendre notre site visible.</p><p>C&rsquo;est donc du côté du repo public, dans la catégorie &ldquo;GitHub Pages&rdquo; qu&rsquo;il ne nous reste plus qu&rsquo;à activer ce dernier. 😁</p><p>Donc là, on fait référence à la partie en haut à droite du schéma, dans Settings > Pages.</p><p>Vous verrez que quand vous l&rsquo;activez, vous pouvez déjà y accéder via votre url github pages fournie par GitHub.</p><h2 id=nom-de-domaine-personnalisé>Nom de domaine personnalisé<a hidden class=anchor aria-hidden=true href=#nom-de-domaine-personnalisé>#</a></h2><p>Mais si vous voulez utiliser un nom de domaine personnalisé comme moi, ça va vous demander un chouïa plus de connaissances. 🙂</p><h3 id=configurer-son-nom-de-domaine>Configurer son nom de domaine<a hidden class=anchor aria-hidden=true href=#configurer-son-nom-de-domaine>#</a></h3><p>Je ne vais pas aller en détails sur le fonctionnement des DNS et noms de domaines, (j&rsquo;en ferais peut-être un article si ça vous intéresse),
mais là ce qui compte, c&rsquo;est de vous <strong>trouver un fournisseur et un nom de domaine</strong>.</p><p>Perso, je ne jure que par OVH pour ça, mais c&rsquo;est simplement par habitude, si vous cherchez &ldquo;Acheter nom de domaine&rdquo; sur Google vous en
trouverez plein d&rsquo;autres, et certainement moins chers. 👍</p><p>Donc pour faire mes emplettes, je vais donc sur OVH, et je commande mon petit nom de domaine (process d&rsquo;achat standard d&rsquo;internet, pas de surprises.)</p><p><img loading=lazy src=/images/ovh-achat-domaine.png alt="Page d&amp;rsquo;achat nom de domaine OVH"></p><p>Une fois votre nom de domaine acheté, il faut attendre un peu qu&rsquo;il soit activé.</p><p>Une fois dispo, vous le retrouverez sur votre espace Web Cloud, <strong>et là vous pourrez tout brancher</strong>.</p><h3 id=comment-ça-marche->Comment ça marche ?<a hidden class=anchor aria-hidden=true href=#comment-ça-marche->#</a></h3><p>Petite parenthèse tech : pour que votre site soit visible sur votre nom de domaine, <strong>il faut le rediriger (ou faire pointer)</strong> dessus.</p><p>Un nom de domaine peut avoir autant de sous domaines que vous voulez : leblogdesam.net est le nom de domaine (ou domaine parent), la partie <code>www</code> de <code>www.leblogdesam.net</code> est un sous domaine <code>www</code> du domaine <code>leblogdesam.net</code></p><p>Si un jour je dev une API pour le blog, elle sera certainement hébergée ssur le sous domaine <code>api</code> et sera donc pointée par <code>api.leblogdesam.net</code>. 👍</p><p>Voilà pour la structure d&rsquo;un nom de domaine. 🙂</p><p>Concernant les enregistrements de redirection, il y en a plusieurs types : A, AAAA, TXT et CNAME pour les principales, mais il y en a plein d&rsquo;autres encore dont on se fiche&mldr;</p><p>Alors, intuitif hein ? 😎</p><p><img loading=lazy src=/images/gifs/oui-mais-pas-du-tout.gif alt="Alors oui, mais pas du tout"></p><p>Je vous l&rsquo;accorde en effet, pour faire simple :</p><ul><li>A = Redirection sur une IPv4, port 80 en http et 443 en https.</li><li>AAAA = Pareil mais avec une IPv6</li><li>CNAME = Redirection canonique, en gros, c&rsquo;est <strong>un alias qui pointe vers un autre nom de domaine</strong></li><li>TXT = Un type flexible, car il prend du plain text, il permet de communiquer des informations aux serveurs DNS ou permettre des redirections pour des outils type analytics,
ou bien des redirections entre sous domaines de notre domaine, ce genre de choses.</li></ul><p>Donc là pour savoir sur quoi pointer, on peut retourner côté GitHub et activer Pages, et mettre notre nom de domaine dans &ldquo;Custom Domain&rdquo; :</p><p>(vous pouvez cocher &ldquo;Enforce HTTPS&rdquo; pour forcer l&rsquo;utilisation du https au passage, ça ne coute rien 😉).
<img loading=lazy src=/images/github-pages.png alt="GitHub Pages"></p><p>Et là, l&rsquo;important c&rsquo;est que Pages nous dit <strong>&ldquo;Custom domains allow you to serve your site from a domain other than .github.io&rdquo;</strong></p><p>Et ça, ça veut dire qu&rsquo;on veut que notre domaine pointe sur le domaine <code>&lt;votre username>.github.io</code>, donc si vous avez bien suivie, on veut une redirection&mldr; <strong>CNAME</strong> !</p><p>Du coup pour ce faire, on peut retourner sur OVH et aller modifier la zone DNS de notre nom de domaine :</p><p><img loading=lazy src=/images/ovh-zone-dns.png alt="Page Zone DNS du nom de domaine"></p><p>Vous aurez un peu de nettoyage à faire, car la plupart du temps OVH vous fournit quelques redirections vers les pages par défaut OVH qui ne vous serviront plus.</p><p>Mais là si on regarde la liste, on voit qu&rsquo;il ne me reste que <strong>deux redirections NS</strong> (pour les serveurs DNS d&rsquo;OVH, faut pas y toucher),
<strong>deux MX</strong> (indispensable au fonctionnement du serveur mail, je vous conseille de les garder),</p><p><strong>Ensuite, plus intéressant, une TXT pour rediriger le domaine parent vers le sous domaine www.</strong></p><p><strong>Et enfin ma redirection CNAME de <code>www</code> vers mon domaine github pages.</strong></p><blockquote><p>(N&rsquo;oubliez pas d&rsquo;ajouter un point &ldquo;.&rdquo; à la redirection, pour cloisonner l&rsquo;enregistrement,
genre <code>&lt;votre username>.github.io.</code> et pas juste <code>&lt;votre username>.github.io</code>,
OVH le fait automatiquement, mais pas sûr que ce soit pareil partout) 🫤</p></blockquote><p>C&rsquo;est possible que côté Pages, il reste en mode &ldquo;checking &mldr;&rdquo;, voire qu&rsquo;il vous dise que c&rsquo;est &ldquo;improperly configured&rdquo; mais ce n&rsquo;est rien, de mon côté ça fait ça et ça fonctionne quand même 👀</p><h3 id=le-fichier-cname>Le fichier CNAME<a hidden class=anchor aria-hidden=true href=#le-fichier-cname>#</a></h3><p><strong>Tout à l&rsquo;heure, on a vu un fichier CNAME dans nos histoires de pipeline, je vous ai dit qu&rsquo;on y reviendrait.</strong></p><p>Pour faire simple, quand vous activez Pages, il ajoute ce fichier à la racine de votre repo pour indiquer aux serveurs Github Pages comment traiter la redirection.</p><p>Par défaut, il contient une IP de serveur github pages, mais une fois le nom de domaine configuré, il contient le nom de domaine en question. 👍</p><p>Seulement, vu que ce fichier est indispensable au branchement du nom de domaine,
on doit s&rsquo;assurer de ne pas le supprimer quand on push notre repo, sinon 💥 plus de site !</p><p><strong>C&rsquo;est pour cela que je le recrée dans le pipeline GitHub Actions &ldquo;à la main&rdquo; à chaque deploy. 🙂</strong></p><p><img loading=lazy src=/images/gifs/and-done.gif alt="Et c&amp;rsquo;est fini !"></p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>En bref, pour moi cette solution est un nobrainer car facile à comprendre, mettre en place et aucune maintenance. 😎</p><p><strong>Ici, j&rsquo;ai essayé de vous l&rsquo;expliquer avec un format entre le tuto détaillé et le guide pratique, j&rsquo;espère que cette solution vous a séduit et vous donnera envie de mettre en ligne tout plein de sites facilement. 😁</strong></p><p><em>À la prochaine !</em> 👋</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.leblogdesam.net/tags/dev/>Dev</a></li><li><a href=https://www.leblogdesam.net/tags/guide/>Guide</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Comment j'ai Dev mon Blog 🌐 on twitter" href="https://twitter.com/intent/tweet/?text=Comment%20j%27ai%20Dev%20mon%20Blog%20%f0%9f%8c%90&amp;url=https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f&amp;hashtags=Dev%2cGuide"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Comment j'ai Dev mon Blog 🌐 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f&amp;title=Comment%20j%27ai%20Dev%20mon%20Blog%20%f0%9f%8c%90&amp;summary=Comment%20j%27ai%20Dev%20mon%20Blog%20%f0%9f%8c%90&amp;source=https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Comment j'ai Dev mon Blog 🌐 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f&title=Comment%20j%27ai%20Dev%20mon%20Blog%20%f0%9f%8c%90"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Comment j'ai Dev mon Blog 🌐 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Comment j'ai Dev mon Blog 🌐 on whatsapp" href="https://api.whatsapp.com/send?text=Comment%20j%27ai%20Dev%20mon%20Blog%20%f0%9f%8c%90%20-%20https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Comment j'ai Dev mon Blog 🌐 on telegram" href="https://telegram.me/share/url?text=Comment%20j%27ai%20Dev%20mon%20Blog%20%f0%9f%8c%90&amp;url=https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><div style=color:#000!important;display:flex><div style=margin:auto><script type=text/javascript src=https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js data-name=bmc-button data-slug=samuelnait data-color=#FFDD00 data-emoji=🍺 data-font=Bree data-text="Paie-moi une pinte" data-outline-color=#000000 data-font-color=#000000 data-coffee-color=#ffffff></script></div></div><footer class=footer><span>&copy; 2023 <a href=https://www.leblogdesam.net>Le blog de Sam</a> -</span>
<span>Propulsé par
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script>const images=Array.from(document.querySelectorAll(".post-content img"));images.forEach(e=>{mediumZoom(e,{margin:0,scrollOffset:40,container:null,template:null})})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copier";function s(){t.innerHTML="Copié !",setTimeout(()=>{t.innerHTML="Copier"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>