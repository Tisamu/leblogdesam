<!doctype html><html lang=fr dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Comment j'ai Dev mon Blog ğŸŒ | Le blog de Sam</title><meta name=keywords content="Dev,Guide"><meta name=description content="TL;DR Pour faire ce blog, j&rsquo;ai utilisÃ© GitHub Actions + Pages, j&rsquo;ai un repo privÃ© qui contient le code source du blog, un pipeline qui build le blog et envoi le code statique sur un repo publique, qui lui est exposÃ© par GitHub Pages.
Et par-dessus, j&rsquo;ai mon nom de domaine leblogdesam.net qui redirige dessus.
Ici, j&rsquo;explique tout avec un peu plus de dÃ©tails pour pouvoir le reproduire chez soi facilement."><meta name=author content><link rel=canonical href=https://www.leblogdesam.net/posts/comment-jai-dev-mon-blog/><link crossorigin=anonymous href=/assets/css/stylesheet.387af320d23f235feae622b1492c9c57f58f8909e9b5847c75f6f87ff4cc60c5.css integrity="sha256-OHrzINI/I1/q5iKxSSycV/WPiQnptYR8dfb4f/TMYMU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.leblogdesam.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.leblogdesam.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.leblogdesam.net/favicon-32x32.png><link rel=apple-touch-icon href=https://www.leblogdesam.net/apple-touch-icon.png><link rel=mask-icon href=https://www.leblogdesam.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Comment j'ai Dev mon Blog ğŸŒ"><meta property="og:description" content="TL;DR Pour faire ce blog, j&rsquo;ai utilisÃ© GitHub Actions + Pages, j&rsquo;ai un repo privÃ© qui contient le code source du blog, un pipeline qui build le blog et envoi le code statique sur un repo publique, qui lui est exposÃ© par GitHub Pages.
Et par-dessus, j&rsquo;ai mon nom de domaine leblogdesam.net qui redirige dessus.
Ici, j&rsquo;explique tout avec un peu plus de dÃ©tails pour pouvoir le reproduire chez soi facilement."><meta property="og:type" content="article"><meta property="og:url" content="https://www.leblogdesam.net/posts/comment-jai-dev-mon-blog/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-30T20:00:04+02:00"><meta property="article:modified_time" content="2023-06-30T20:00:04+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Comment j'ai Dev mon Blog ğŸŒ"><meta name=twitter:description content="TL;DR Pour faire ce blog, j&rsquo;ai utilisÃ© GitHub Actions + Pages, j&rsquo;ai un repo privÃ© qui contient le code source du blog, un pipeline qui build le blog et envoi le code statique sur un repo publique, qui lui est exposÃ© par GitHub Pages.
Et par-dessus, j&rsquo;ai mon nom de domaine leblogdesam.net qui redirige dessus.
Ici, j&rsquo;explique tout avec un peu plus de dÃ©tails pour pouvoir le reproduire chez soi facilement."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.leblogdesam.net/posts/"},{"@type":"ListItem","position":3,"name":"Comment j'ai Dev mon Blog ğŸŒ","item":"https://www.leblogdesam.net/posts/comment-jai-dev-mon-blog/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Comment j'ai Dev mon Blog ğŸŒ","name":"Comment j\u0027ai Dev mon Blog ğŸŒ","description":"TL;DR Pour faire ce blog, j\u0026rsquo;ai utilisÃ© GitHub Actions + Pages, j\u0026rsquo;ai un repo privÃ© qui contient le code source du blog, un pipeline qui build le blog et envoi le code statique sur un repo publique, qui lui est exposÃ© par GitHub Pages.\nEt par-dessus, j\u0026rsquo;ai mon nom de domaine leblogdesam.net qui redirige dessus.\nIci, j\u0026rsquo;explique tout avec un peu plus de dÃ©tails pour pouvoir le reproduire chez soi facilement.","keywords":["Dev","Guide"],"articleBody":" TL;DR Pour faire ce blog, jâ€™ai utilisÃ© GitHub Actions + Pages, jâ€™ai un repo privÃ© qui contient le code source du blog, un pipeline qui build le blog et envoi le code statique sur un repo publique, qui lui est exposÃ© par GitHub Pages.\nEt par-dessus, jâ€™ai mon nom de domaine leblogdesam.net qui redirige dessus.\nIci, jâ€™explique tout avec un peu plus de dÃ©tails pour pouvoir le reproduire chez soi facilement.\nIntroduction Vous allez voir que â€œDevâ€, câ€™est un grand mot,\ncâ€™est surtout de la config, il suffit de connaitre les bases de git, savoir manipuler github et le reste se dÃ©roule presque tout seul. ğŸ‘\nLe choix des technos PremiÃ¨re Ã©tape, trouver les bons outils.\nJe savais dÃ©jÃ  que je voulais pouvoir Ã©crire mes articles en Markdown pour pouvoir me concentrer sur le contenu plus que sur la forme.\nEt aussi, je voulais un outil simple Ã  dÃ©ployer, sans base de donnÃ©es ou ce genre de trucs, mon besoin actuel, câ€™est Ã©crire et publier du contenu sur le web, donc je reste YAGNI (ğŸ‘€) et me concentre sur ces points.\nJe savais dÃ©jÃ  que des solutions de dÃ©ploiement de sites statiques existaient et Ã©taient apprÃ©ciÃ©es par les crÃ©ateurs de contenus ou dans lâ€™Ã©vÃ©nementiel.\nDonc je tape quelque chose comme â€œBest static website generatorâ€ sur mon browser, et aprÃ¨s quelques recherches je tombe sur Hugo . ğŸ˜¯\nBingo, pile ce que je recherchais :\nâœ… Structure simple.\nâœ… Facile Ã  personnaliser, avec plein de thÃ¨mes.\nâœ… Se dÃ©ploie en statique.\nâœ… Contenu en markdown.\nâœ… CommunautÃ© prÃ©sente.\nHugo + PaperMod PaperMod est un thÃ¨me pour Hugo, enfin un â€œsuperthemeâ€ pour Ãªtre plus prÃ©cis puisquâ€™il ajoute quelques features intÃ©ressantes pour inclure un dark mode, une petite bio, des liens vers les rÃ©seaux, le temps de lecture des articles et plein dâ€™autres choses que je nâ€™ai pas encore explorÃ©. ğŸ˜„\nEt du coup, tâ€™as codÃ© quoi pour lâ€™instant ? ğŸ¤” Rien du tout.\nBeh oui, câ€™est juste quelques commandes pour setup Hugo (le getting started en gros) et cloner le repo PaperMod dans le dossier /themes .\nLe seul truc un peu tricky, câ€™est que jâ€™ai clonÃ© PaperMod sans lâ€™inclure comme un submodule git, car je voulais quâ€™il soit prÃ©sent en flat dans mon projet, choix arbitraire et personnel. ğŸ˜›\nDu coup bah techniquement, câ€™est dÃ©jÃ  fonctionnel hein. ğŸ™‚\nPersonnalisation et peaufinage Il y a quelques dÃ©tails que je voulais quand mÃªme ajouter. ğŸ¤“\nDÃ©jÃ , les infos me concernant, le nom du blog, quelques lignes de prÃ©sentation et des liens vers mes rÃ©seaux pour me contacter plus facilement. ğŸ‘\nTout Ã§a se passe dans le fichier de config dâ€™hugo (hugo.yml), avec un objet params proposÃ© par paperMod qui permet dâ€™Ã©toffer cette config.\nparams: homeInfoParams: Title: Bienvenue sur Le Blog de Sam ğŸ‘‹ Content: | ğŸš§ En cours de construction... ğŸš§ - â¡ï¸ Ici on parle tech, gestion de projet, retours d'expÃ©riences, management, dev perso et plus encore - â¡ï¸ Un TLDR pour chaque article - â¡ï¸ ~ Un article par semaine - â¡ï¸ Etc Puis le thÃ¨me dÃ©tecte ces changements automatiquement et adapte la mise en page avec ces infos. ğŸ˜ƒ\nEnsuite, un truc important pour moi : le temps de lecture, pour que sur chaque article, on puisse voir le temps de lecture Ã  prÃ©voir pour lâ€™article Ã  cÃ´tÃ© de sa date.\nEt pour Ã§a, PaperMod intÃ¨gre dÃ©jÃ  un calcul automatique, il suffit dâ€™activer lâ€™affichage de lâ€™info dans le fichier de params via ShowReadingTime: true\nEt Tada, le reading time est affichÃ© ! ğŸ‰ Autre chose, jâ€™aimerais que quand une image apparait, je puisse la zoomer dâ€™un clic, pour les schÃ©mas et ce genre de choses par exemple.\nPour ce faire, jâ€™ai trouvÃ© sur le net un bout de code Ã  mettre dans layouts/partials/extend_footer.htmtl\n{{- /* Footer custom content area start */ -}} {{- /* Insert any custom code web-analytics, resources, etc. here */ -}} \u003cscript src=\"https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js\" integrity=\"sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"\u003e\u003c/script\u003e \u003cscript\u003e const images = Array.from(document.querySelectorAll(\".post-content img\")); images.forEach(img =\u003e { mediumZoom(img, { margin: 0, /* The space outside the zoomed image */ scrollOffset: 40, /* The number of pixels to scroll to close the zoom */ container: null, /* The viewport to render the zoom in */ template: null /* The template element to display on zoom */ }); }); \u003c/script\u003e {{- /* Footer custom content area end */ -}} GrÃ¢ce Ã  Ã§a (et un petit bout de CSS pour le comportement en mode Dark), jâ€™ai des images zoomables. ğŸ‘\nEt pour finir, des petits ajouts comme une table des matiÃ¨res, boutons de partages et un bouton copier le code pour faciliter la navigation dans les articles.\nLÃ , jâ€™ajoute simplement\nShowToc: true ShowShareButtons: true ShowCodeCopyButtons: true Dans le fichier params, et bim :\nBien jouÃ©, aller apÃ©ro. ğŸº\nOui bon effectivement. ğŸ‘€\nUn autre truc que je vois souvent sur les contenus open sources ou indÃ©pendant :\nle bouton pour tipper (= donner un pour boire) le crÃ©ateur, et celui que je prÃ©fÃ¨re, câ€™est â€œBuy me a coffeeâ€, donc je me prÃªte au jeu et vais donc crÃ©er cette petite page Buy me a Coffee, et lÃ , je vois quâ€™en intÃ©grant le bouton, on peut le personnaliser ğŸ¤©, je le customise donc pour quâ€™il soit un peu plus Ã  mon image (ğŸº) et copie colle fournit par le site dans le footer.html du thÃ¨me pour voir ce que Ã§a donne.\nBon ok, il faut juste lâ€™aligner, alors un petit coup de flex et margin auto, et on est bon :\nBon, Ã  ce stade, je suis satisfait et je commence Ã  Ã©crire mon premier article pour prÃ©senter mon blog et je me rends compte que quand je clique sur un lien, Ã§a ne lâ€™ouvre pas dans un nouvel onglet, et Ã§a, Ã§a mâ€™Ã©nerve fort. ğŸ˜ \nDu coup je cherche un peu et en fait, il me suffit de crÃ©er un petit fichier pour le markup dâ€™un lien que jâ€™ai placÃ© dans un nouveau fichier themes/PaperMod/layouts/_default/_markup/render-link.html, et hop, problÃ¨me rÃ©solu. ğŸ™‚\n\u003ca href=\"{{ .Destination | safeURL }}\"{{ with .Title}} title=\"{{ . }}\"{{ end }}{{ if strings.HasPrefix .Destination \"http\" }} target=\"_blank\" rel=\"noopener\"{{ end }}\u003e{{ .Text | safeHTML }}\u003c/a\u003e Et en gros la v1 de mon blog est prÃªte, et Ã§a donne ce que vous avez Ã  lâ€™Ã©cran actuellement. ğŸ‰\nNon non je vous en prie, asseyez-vous, il nous reste encore un beau morceau. ğŸ˜\nLe dÃ©ploiement ğŸš€ Et oui, câ€™est cool, mais maintenant, il faut le dÃ©ployer. ğŸ˜¬\nCâ€™est une Ã©tape qui peut faire peur aux devs, mais ce nâ€™est pas si compliquÃ© de dÃ©ployer un site statique aujourdâ€™hui, je vais vous montrer la mÃ©thode que jâ€™utilise pour le blog et que je trouve la plus optimale pour faire Ã§a automatiquement et gratuitement. ğŸ‘\n(Je vous mets un petit schÃ©ma qui rÃ©capitule tout Ã§a plus bas car câ€™est un peu tricky, accrochez-vous. ğŸ˜‰) Plusieurs solutions Dâ€™abord, il faut savoir quâ€™il y a plusieurs solutions pour hÃ©berger son site, la premiÃ¨re, la plus traditionnelle, est dâ€™utiliser un webserver type nginx ou apache pour faire pointer notre nom de domaine vers le bon dossier sur un serveur dÃ©diÃ© ou un VPS.\nMais Ã§a demande pas mal de connaissance, notamment gÃ©rer un serveur, savoir comment sÃ©curiser ce dernier, installer un certificat SSL ou certbot etcâ€¦ ğŸ˜©\nDonc mÃªme si jâ€™ai ces compÃ©tences, bah flemme, je veux une solution simple, aujourdâ€™hui, il y en a pas mal du genre Static.app ou Vercel , mais ils demandent un peu de config et le tiers gratuit est vite limitÃ© notamment pour les noms de domaine. ğŸ˜•\nMais il existe encore une autre solution gratuite en tout point : GitHub Pages ! ğŸ¤©\nSeul inconvÃ©nient, il faut utiliser GitHub comme repo (dÃ©so les fans de GitLab ğŸ‘€) et surtout il faut ouvrir publiquement le code du repository qui hÃ©berge le code Ã  exposer sur le net.\nBah alors moi Ã§a me gÃªne car je voudrais pouvoir sauvegarder mes drafts et pas rÃ©vÃ©ler tout mon petit code de mon blog en exposant la version build, dâ€™autant que la version build ne fait pas vraiment partie de mon code, donc pas envie quâ€™elle soit dans le repoâ€¦ ğŸ¤”\nNon mais il y a une solution, pas de panique, il suffit (tenez vous bien) dâ€™avoir un repo qui nâ€™expose QUE le code statique, donc /public, et activer GitHub pages dessus. ğŸ¥³\nPour faire Ã§a et lâ€™automatiser, fastoche, lâ€™idÃ©e est que quand je push sur mon repo privÃ© avec mes nouveaux articles (sur la branche main donc), bah le repo publique se met Ã  jour tout seul avec le code statique de mon blogâ€¦. oui facile Ã  dire, jâ€™en conviens. ğŸ˜\nGitHub Actions Ã  la rescousse GitHub Actions câ€™est le CI/CD de GitHub, câ€™est des petites machines qui peuvent faire plein dâ€™Ã©tapes de script, pour valider lâ€™Ã©tat des branches en passant des tests unitaires, automatiser des dÃ©ploiements, ce genre de chosesâ€¦\nDans GitHub Actions, on peut faire un peu ce quâ€™on veut, et câ€™est ce qui est intÃ©ressant. ğŸ‘\nDu coup moi ce que je veux, câ€™est que quand je push sur la main, la pipeline build le blog (avec le CLI hugo) et push le dossier public qui vient dâ€™Ãªtre gÃ©nÃ©rÃ© sur le repo publique. âœ”ï¸\nDonc aprÃ¨s avoir crÃ©Ã© un repo publique leblogdesam sur GitHub, je vais aller sur mon repo priver prÃ©parer le CI/CD :\nPour prÃ©parer le pipeline, il faut placer un fichier main.yml (qui correspond au nom de la branche cible) Ã  un emplacement spÃ©cifique (.github/workflows/main.yml) du projet pour quâ€™il soit prit en compte, et dedans, jâ€™ai mis ce code :\n# /.github/workflows/main.yml name: Blog Deployment on: workflow_dispatch: push: jobs: build: name: Build and Deploy runs-on: ubuntu-latest permissions: write-all steps: - name: ğŸ›’ Checkout uses: actions/checkout@v3 with: persist-credentials: false - name: âœ¨ Setup Hugo env: HUGO_VERSION: 0.114.0 run: | mkdir ~/hugo cd ~/hugo curl -L \"https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz\" --output hugo.tar.gz tar -xvzf hugo.tar.gz sudo mv hugo /usr/local/bin - name: ğŸ› ï¸ Build run: hugo --minify - name: ğŸš€ Deploy env: DOMAIN: www.leblogdesam.net run: | cd public git config --global init.defaultBranch main git init git config user.name \"Samuel NAIT\" git config user.email \"nait.samuel@gmail.com\" git remote add origin https://Tisamu:${{ secrets.GH_TOKEN }}@github.com/Tisamu/leblogdesam.git echo \"${DOMAIN}\" \u003e CNAME git add -f ./ git commit -m \"ğŸš€ Deploy the blog\" git push origin HEAD:main --force (Oui bah, jâ€™avais dit que ce serait un peu plus technique. ğŸ‘€)\nOk, on y va par Ã©tape :\nname: Blog Deployment on: workflow_dispatch: push: jobs: build: name: Build and Deploy runs-on: ubuntu-latest permissions: write-all steps: - name: ğŸ›’ Checkout uses: actions/checkout@v3 with: persist-credentials: false - name: âœ¨ Setup Hugo env: HUGO_VERSION: 0.114.0 run: | mkdir ~/hugo cd ~/hugo curl -L \"https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz\" --output hugo.tar.gz tar -xvzf hugo.tar.gz sudo mv hugo /usr/local/bin Dâ€™abord je dÃ©finis le pipeline, et je dis quâ€™il se dÃ©clenche (trigger) quand on push sur la main.\n(Câ€™est la partie on:)\nEnsuite la premiÃ¨re Ã©tape (steps) câ€™est de checkout, câ€™est un job de GitHub Actions qui lui permet de rÃ©cupÃ©rer le repo du projet, tout simplement.\nEnsuite on va rÃ©cupÃ©rer le livrable dâ€™Hugo, et lâ€™installer pour pouvoir builder le projet (lâ€™Ã©tape âœ¨ Setup Hugo). ğŸ‘\nEt pour finir :\n- name: ğŸ› ï¸ Build run: hugo --minify - name: ğŸš€ Deploy env: DOMAIN: www.leblogdesam.net run: | cd public git config --global init.defaultBranch main git init git config user.name \"Samuel NAIT\" git config user.email \"nait.samuel@gmail.com\" git remote add origin https://Tisamu:${{ secrets.GH_TOKEN }}@github.com/Tisamu/leblogdesam.git echo \"${DOMAIN}\" \u003e CNAME git add -f ./ git commit -m \"ğŸš€ Deploy the blog\" git push origin HEAD:main --force LÃ , on build le blog, donc on gÃ©nÃ¨re le dossier public grÃ¢ce Ã  la commande hugo --minify.\nEt on va dans ce dossier, on en fait un repo git (git init etc â€¦) et on le branche sur notre repo publique distant en utilisant un token dâ€™API GitHub ${{ secrets.GH_TOKEN }} (que jâ€™ai gÃ©nÃ©rÃ© et indiquÃ© dans les settings du Repository privÃ©, celui qui porte ce pipeline).\nEt enfin, il commit et push sur le repo publique, avant Ã§a on voit une petite Ã©tape echo \"${DOMAIN}\" \u003e CNAME, je vais y revenir plus loin, câ€™est pour faire pointer mon nom de domaine www.leblogdesam.net sur le GitHub pages du repo. ğŸ‘€\nEt voilÃ , Ã  ce stade, dÃ¨s que je push sur mon repo privÃ©, Ã§a dÃ©clenche tout Ã§a et Ã§a fini dans mon repo publique ! ğŸ‰\nLe petit schÃ©ma comme promis Vous pouvez voir le schÃ©ma en full size ici (Petite cafouille entre le nom du dossier public / static mais je suis sÃ»r que vous me pardonnerez. ğŸ¥²)\nGitHub Pages Ã€ ce stade, on a tout ce quâ€™il faut pour rendre notre site visible.\nCâ€™est donc du cÃ´tÃ© du repo public, dans la catÃ©gorie â€œGitHub Pagesâ€ quâ€™il ne nous reste plus quâ€™Ã  activer ce dernier. ğŸ˜\nDonc lÃ , on fait rÃ©fÃ©rence Ã  la partie en haut Ã  droite du schÃ©ma, dans Settings \u003e Pages.\nVous verrez que quand vous lâ€™activez, vous pouvez dÃ©jÃ  y accÃ©der via votre url github pages fournie par GitHub.\nNom de domaine personnalisÃ© Mais si vous voulez utiliser un nom de domaine personnalisÃ© comme moi, Ã§a va vous demander un chouÃ¯a plus de connaissances. ğŸ™‚\nConfigurer son nom de domaine Je ne vais pas aller en dÃ©tails sur le fonctionnement des DNS et noms de domaines, (jâ€™en ferais peut-Ãªtre un article si Ã§a vous intÃ©resse), mais lÃ  ce qui compte, câ€™est de vous trouver un fournisseur et un nom de domaine.\nPerso, je ne jure que par OVH pour Ã§a, mais câ€™est simplement par habitude, si vous cherchez â€œAcheter nom de domaineâ€ sur Google vous en trouverez plein dâ€™autres, et certainement moins chers. ğŸ‘\nDonc pour faire mes emplettes, je vais donc sur OVH, et je commande mon petit nom de domaine (process dâ€™achat standard dâ€™internet, pas de surprises.)\nUne fois votre nom de domaine achetÃ©, il faut attendre un peu quâ€™il soit activÃ©.\nUne fois dispo, vous le retrouverez sur votre espace Web Cloud, et lÃ  vous pourrez tout brancher.\nComment Ã§a marche ? Petite parenthÃ¨se tech : pour que votre site soit visible sur votre nom de domaine, il faut le rediriger (ou faire pointer) dessus.\nUn nom de domaine peut avoir autant de sous domaines que vous voulez : leblogdesam.net est le nom de domaine (ou domaine parent), la partie www de www.leblogdesam.net est un sous domaine www du domaine leblogdesam.net\nSi un jour je dev une API pour le blog, elle sera certainement hÃ©bergÃ©e ssur le sous domaine api et sera donc pointÃ©e par api.leblogdesam.net. ğŸ‘\nVoilÃ  pour la structure dâ€™un nom de domaine. ğŸ™‚\nConcernant les enregistrements de redirection, il y en a plusieurs types : A, AAAA, TXT et CNAME pour les principales, mais il y en a plein dâ€™autres encore dont on se ficheâ€¦\nAlors, intuitif hein ? ğŸ˜\nJe vous lâ€™accorde en effet, pour faire simple :\nA = Redirection sur une IPv4, port 80 en http et 443 en https. AAAA = Pareil mais avec une IPv6 CNAME = Redirection canonique, en gros, câ€™est un alias qui pointe vers un autre nom de domaine TXT = Un type flexible, car il prend du plain text, il permet de communiquer des informations aux serveurs DNS ou permettre des redirections pour des outils type analytics, ou bien des redirections entre sous domaines de notre domaine, ce genre de choses. Donc lÃ  pour savoir sur quoi pointer, on peut retourner cÃ´tÃ© GitHub et activer Pages, et mettre notre nom de domaine dans â€œCustom Domainâ€ :\n(vous pouvez cocher â€œEnforce HTTPSâ€ pour forcer lâ€™utilisation du https au passage, Ã§a ne coute rien ğŸ˜‰). Et lÃ , lâ€™important câ€™est que Pages nous dit â€œCustom domains allow you to serve your site from a domain other than .github.ioâ€\nEt Ã§a, Ã§a veut dire quâ€™on veut que notre domaine pointe sur le domaine .github.io, donc si vous avez bien suivie, on veut une redirectionâ€¦ CNAME !\nDu coup pour ce faire, on peut retourner sur OVH et aller modifier la zone DNS de notre nom de domaine :\nVous aurez un peu de nettoyage Ã  faire, car la plupart du temps OVH vous fournit quelques redirections vers les pages par dÃ©faut OVH qui ne vous serviront plus.\nMais lÃ  si on regarde la liste, on voit quâ€™il ne me reste que deux redirections NS (pour les serveurs DNS dâ€™OVH, faut pas y toucher), deux MX (indispensable au fonctionnement du serveur mail, je vous conseille de les garder),\nEnsuite, plus intÃ©ressant, une TXT pour rediriger le domaine parent vers le sous domaine www.\nEt enfin ma redirection CNAME de www vers mon domaine github pages.\n(Nâ€™oubliez pas dâ€™ajouter un point â€œ.â€ Ã  la redirection, pour cloisonner lâ€™enregistrement, genre .github.io. et pas juste .github.io, OVH le fait automatiquement, mais pas sÃ»r que ce soit pareil partout) ğŸ«¤\nCâ€™est possible que cÃ´tÃ© Pages, il reste en mode â€œchecking â€¦â€, voire quâ€™il vous dise que câ€™est â€œimproperly configuredâ€ mais ce nâ€™est rien, de mon cÃ´tÃ© Ã§a fait Ã§a et Ã§a fonctionne quand mÃªme ğŸ‘€\nLe fichier CNAME Tout Ã  lâ€™heure, on a vu un fichier CNAME dans nos histoires de pipeline, je vous ai dit quâ€™on y reviendrait.\nPour faire simple, quand vous activez Pages, il ajoute ce fichier Ã  la racine de votre repo pour indiquer aux serveurs Github Pages comment traiter la redirection.\nPar dÃ©faut, il contient une IP de serveur github pages, mais une fois le nom de domaine configurÃ©, il contient le nom de domaine en question. ğŸ‘\nSeulement, vu que ce fichier est indispensable au branchement du nom de domaine, on doit sâ€™assurer de ne pas le supprimer quand on push notre repo, sinon ğŸ’¥ plus de site !\nCâ€™est pour cela que je le recrÃ©e dans le pipeline GitHub Actions â€œÃ  la mainâ€ Ã  chaque deploy. ğŸ™‚\nConclusion En bref, pour moi cette solution est un nobrainer car facile Ã  comprendre, mettre en place et aucune maintenance. ğŸ˜\nIci, jâ€™ai essayÃ© de vous lâ€™expliquer avec un format entre le tuto dÃ©taillÃ© et le guide pratique, jâ€™espÃ¨re que cette solution vous a sÃ©duit et vous donnera envie de mettre en ligne tout plein de sites facilement. ğŸ˜\nÃ€ la prochaine ! ğŸ‘‹\n","wordCount":"3000","inLanguage":"fr","datePublished":"2023-06-30T20:00:04+02:00","dateModified":"2023-06-30T20:00:04+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.leblogdesam.net/posts/comment-jai-dev-mon-blog/"},"publisher":{"@type":"Organization","name":"Le blog de Sam","logo":{"@type":"ImageObject","url":"https://www.leblogdesam.net/favicon.ico"}}}</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){t="https://leblogdesam.matomo.cloud/",_paq.push(["setTrackerUrl",t+"matomo.php"]),_paq.push(["setSiteId","1"]);var t,n=document,e=n.createElement("script"),s=n.getElementsByTagName("script")[0];e.async=!0,e.src="//cdn.matomo.cloud/leblogdesam.matomo.cloud/matomo.js",s.parentNode.insertBefore(e,s)}()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//matomo.leblogdesam.net/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.leblogdesam.net accesskey=h title="Le blog de Sam (Alt + H)">Le blog de Sam</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.leblogdesam.net/tags title=Tags><span>Tags</span></a></li><li><a href=https://www.leblogdesam.net/politique-confidentialite title="Politique de confidentialitÃ©"><span>Politique de confidentialitÃ©</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Comment j'ai Dev mon Blog ğŸŒ</h1><div class=post-meta><span title='2023-06-30 20:00:04 +0200 +0200'>30 juin 2023</span>&nbsp;Â·&nbsp;15 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table des matiÃ¨res</span></summary><div class=inner><ul><li><a href=#introduction aria-label=Introduction>Introduction</a></li><li><a href=#le-choix-des-technos aria-label="Le choix des technos">Le choix des technos</a><ul><li><a href=#hugo--papermod aria-label="Hugo + PaperMod">Hugo + PaperMod</a></li><li><a href=#et-du-coup-tas-cod%c3%a9-quoi-pour-linstant-- aria-label="Et du coup, t&amp;rsquo;as codÃ© quoi pour l&amp;rsquo;instant ? ğŸ¤”">Et du coup, t&rsquo;as codÃ© quoi pour l&rsquo;instant ? ğŸ¤”</a></li><li><a href=#personnalisation-et-peaufinage aria-label="Personnalisation et peaufinage">Personnalisation et peaufinage</a></li></ul></li><li><a href=#le-d%c3%a9ploiement- aria-label="Le dÃ©ploiement ğŸš€">Le dÃ©ploiement ğŸš€</a><ul><li><a href=#plusieurs-solutions aria-label="Plusieurs solutions">Plusieurs solutions</a></li><li><a href=#github-actions-%c3%a0-la-rescousse aria-label="GitHub Actions Ã  la rescousse">GitHub Actions Ã  la rescousse</a></li><li><a href=#le-petit-sch%c3%a9ma-comme-promis aria-label="Le petit schÃ©ma comme promis">Le petit schÃ©ma comme promis</a></li><li><a href=#github-pages aria-label="GitHub Pages">GitHub Pages</a></li></ul></li><li><a href=#nom-de-domaine-personnalis%c3%a9 aria-label="Nom de domaine personnalisÃ©">Nom de domaine personnalisÃ©</a><ul><li><a href=#configurer-son-nom-de-domaine aria-label="Configurer son nom de domaine">Configurer son nom de domaine</a></li><li><a href=#comment-%c3%a7a-marche- aria-label="Comment Ã§a marche ?">Comment Ã§a marche ?</a></li><li><a href=#le-fichier-cname aria-label="Le fichier CNAME">Le fichier CNAME</a></li></ul></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li></ul></div></details></div><div class=post-content><blockquote><p><details><summary markdown=span>TL;DR</summary>
<i><p>Pour faire ce blog, j&rsquo;ai utilisÃ© GitHub Actions + Pages, j&rsquo;ai un repo privÃ© qui contient le code source du blog, un pipeline
qui build le blog et envoi le code statique sur un repo publique, qui lui est exposÃ© par GitHub Pages.</p><p>Et par-dessus, j&rsquo;ai mon nom de domaine leblogdesam.net qui redirige dessus.</p><p>Ici, j&rsquo;explique tout avec un peu plus de dÃ©tails pour pouvoir le reproduire chez soi facilement.</p></i></details></p></blockquote><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>Vous allez voir que &ldquo;Dev&rdquo;, c&rsquo;est un grand mot,<br>c&rsquo;est surtout de la config, il suffit de connaitre les bases de git, savoir manipuler github et le reste se dÃ©roule presque tout seul. ğŸ‘</p><h2 id=le-choix-des-technos>Le choix des technos<a hidden class=anchor aria-hidden=true href=#le-choix-des-technos>#</a></h2><p>PremiÃ¨re Ã©tape, trouver les bons outils.<br>Je savais dÃ©jÃ  que je voulais pouvoir Ã©crire mes articles en <strong>Markdown</strong> pour pouvoir me concentrer sur le contenu plus que sur la forme.</p><p>Et aussi, je voulais un outil <strong>simple Ã  dÃ©ployer</strong>, sans base de donnÃ©es ou ce genre de trucs,
mon besoin actuel, c&rsquo;est Ã©crire et publier du contenu sur le web, donc je reste <em>YAGNI</em> (ğŸ‘€) et me concentre sur ces points.</p><p>Je savais dÃ©jÃ  que des solutions de dÃ©ploiement de sites statiques existaient et Ã©taient apprÃ©ciÃ©es
par les crÃ©ateurs de contenus ou dans l&rsquo;Ã©vÃ©nementiel.</p><p>Donc je tape quelque chose comme &ldquo;Best static website generator&rdquo; sur mon browser,
et aprÃ¨s quelques recherches je tombe sur <strong><a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a>
</strong>. ğŸ˜¯</p><p><img loading=lazy src=/images/gifs/yes-nerd.gif alt="Yes !"></p><p>Bingo, pile ce que je recherchais :</p><p>âœ… Structure simple.<br>âœ… Facile Ã  personnaliser, avec plein de thÃ¨mes.<br>âœ… Se dÃ©ploie en statique.<br>âœ… Contenu en markdown.<br>âœ… CommunautÃ© prÃ©sente.</p><h3 id=hugo--papermod>Hugo + PaperMod<a hidden class=anchor aria-hidden=true href=#hugo--papermod>#</a></h3><p><a href=https://github.com/adityatelange/hugo-PaperMod target=_blank rel=noopener>PaperMod</a>
est <strong>un thÃ¨me</strong> pour Hugo,
enfin un &ldquo;supertheme&rdquo; pour Ãªtre plus prÃ©cis puisqu&rsquo;il ajoute quelques features intÃ©ressantes pour inclure un dark mode,
une petite bio, des liens vers les rÃ©seaux,
le temps de lecture des articles et plein d&rsquo;autres choses que je n&rsquo;ai pas encore explorÃ©. ğŸ˜„</p><h3 id=et-du-coup-tas-codÃ©-quoi-pour-linstant-->Et du coup, t&rsquo;as codÃ© quoi pour l&rsquo;instant ? ğŸ¤”<a hidden class=anchor aria-hidden=true href=#et-du-coup-tas-codÃ©-quoi-pour-linstant-->#</a></h3><p><strong>Rien du tout.</strong></p><p>Beh oui, c&rsquo;est juste quelques commandes pour setup Hugo (le getting started en gros) et cloner le repo PaperMod dans le dossier <code>/themes</code> .</p><p>Le seul truc un peu tricky, c&rsquo;est que j&rsquo;ai clonÃ© PaperMod sans l&rsquo;inclure comme un submodule git, car je voulais qu&rsquo;il soit prÃ©sent en flat dans mon projet,
choix arbitraire et personnel. ğŸ˜›</p><p>Du coup bah techniquement, <strong>c&rsquo;est dÃ©jÃ  fonctionnel</strong> hein. ğŸ™‚</p><p><img loading=lazy src=/images/gifs/arthur-sinon.gif alt=arthur-sinon.gif></p><h3 id=personnalisation-et-peaufinage>Personnalisation et peaufinage<a hidden class=anchor aria-hidden=true href=#personnalisation-et-peaufinage>#</a></h3><p>Il y a quelques dÃ©tails que je voulais quand mÃªme ajouter. ğŸ¤“</p><p><strong>DÃ©jÃ , les infos me concernant, le nom du blog,
quelques lignes de prÃ©sentation et des liens vers mes rÃ©seaux pour me contacter plus facilement.</strong> ğŸ‘</p><p>Tout Ã§a se passe dans le fichier de config d&rsquo;hugo (<code>hugo.yml</code>), avec un objet <code>params</code> proposÃ© par paperMod qui permet d&rsquo;Ã©toffer cette config.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>params</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>homeInfoParams</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Title</span>: <span style=color:#ae81ff>Bienvenue sur Le Blog de Sam ğŸ‘‹</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Content</span>: <span style=color:#ae81ff>| </span>
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>ğŸš§ En cours de construction... ğŸš§</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>â¡ï¸ Ici on parle tech, gestion de projet, retours d&#39;expÃ©riences, management, dev perso et plus encore</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>â¡ï¸ Un TLDR pour chaque article</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>â¡ï¸ ~ Un article par semaine</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>â¡ï¸ Etc</span>
</span></span></code></pre></div><p>Puis le thÃ¨me dÃ©tecte ces changements automatiquement et adapte la mise en page avec ces infos. ğŸ˜ƒ</p><p><img loading=lazy src=/images/blog-bio.png alt="Screenshot du rÃ©sultat"></p><p><strong>Ensuite</strong>, un truc important pour moi : <strong>le temps de lecture</strong>, pour que sur chaque article, on puisse voir le temps de lecture Ã  prÃ©voir pour l&rsquo;article Ã  cÃ´tÃ© de sa date.</p><p>Et pour Ã§a, PaperMod intÃ¨gre dÃ©jÃ  un calcul automatique, il suffit d&rsquo;activer l&rsquo;affichage de l&rsquo;info dans le fichier de params via <code>ShowReadingTime: true</code></p><p><strong>Et Tada, le reading time est affichÃ© ! ğŸ‰</strong>
<img loading=lazy src=/images/read-time.png alt="Screenshot reading time"></p><p>Autre chose, j&rsquo;aimerais que quand une image apparait, je puisse la zoomer d&rsquo;un clic, pour les schÃ©mas et ce genre de choses par exemple.</p><p>Pour ce faire, j&rsquo;ai trouvÃ© sur le net un bout de code Ã  mettre dans <code>layouts/partials/extend_footer.htmtl</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{- /* Footer custom content area start */ -}}
</span></span><span style=display:flex><span>{{- /*     Insert any custom code web-analytics, resources, etc. here */ -}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js&#34;</span> <span style=color:#a6e22e>integrity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==&#34;</span> <span style=color:#a6e22e>crossorigin</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;anonymous&#34;</span> <span style=color:#a6e22e>referrerpolicy</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;no-referrer&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>images</span> <span style=color:#f92672>=</span> Array.<span style=color:#a6e22e>from</span>(document.<span style=color:#a6e22e>querySelectorAll</span>(<span style=color:#e6db74>&#34;.post-content img&#34;</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>images</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#a6e22e>img</span> =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mediumZoom</span>(<span style=color:#a6e22e>img</span>, {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>margin</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#75715e>/* The space outside the zoomed image */</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>scrollOffset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>40</span>, <span style=color:#75715e>/* The number of pixels to scroll to close the zoom */</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>container</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>, <span style=color:#75715e>/* The viewport to render the zoom in */</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span> <span style=color:#75715e>/* The template element to display on zoom */</span>
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>{{- /* Footer custom content area end */ -}}
</span></span></code></pre></div><p>GrÃ¢ce Ã  Ã§a (et un petit bout de CSS pour le comportement en mode Dark), j&rsquo;ai des images zoomables. ğŸ‘</p><p><strong>Et pour finir, des petits ajouts comme une table des matiÃ¨res, boutons de partages et un bouton copier le code</strong> pour faciliter la navigation
dans les articles.</p><p>LÃ , j&rsquo;ajoute simplement</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>ShowToc</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>ShowShareButtons</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>ShowCodeCopyButtons</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><p>Dans le fichier params, et bim :</p><p><img loading=lazy src=/images/toc.png alt="Table des matiÃ¨res">
<img loading=lazy src=/images/share-buttons.png alt="Boutons de partage">
Bien jouÃ©, aller apÃ©ro. ğŸº</p><p><img loading=lazy src=/images/gifs/early-will-ferrell.gif alt=early-will-ferrell.gif></p><p>Oui bon effectivement. ğŸ‘€</p><p>Un autre truc que je vois souvent sur les contenus open sources ou indÃ©pendant :<br>le bouton pour tipper <em>(= donner un pour boire)</em> le crÃ©ateur,
et celui que je prÃ©fÃ¨re, c&rsquo;est &ldquo;<strong>Buy me a coffee</strong>&rdquo;, donc je me prÃªte au jeu et vais donc crÃ©er cette petite page Buy me a Coffee, et lÃ , je vois qu&rsquo;en intÃ©grant le bouton, on peut le personnaliser ğŸ¤©,
je le customise donc pour qu&rsquo;il soit un peu plus Ã  mon image (ğŸº) et copie colle fournit par le site dans le <code>footer.html</code> du thÃ¨me pour voir ce que Ã§a donne.</p><p><img loading=lazy src=/images/bouton-bmc-decale.png alt="Screenshot du bouton qui se place mal sur la page"></p><p><img loading=lazy src=/images/gifs/probleme-finition.gif alt="On a un problÃ¨me de finition"></p><p>Bon ok, il faut juste l&rsquo;aligner, alors un petit coup de flex et margin auto, et on est bon :</p><p><img loading=lazy src=/images/bouton-bmc-centre.png alt="Screenshot du bouton centrÃ©"></p><p>Bon, Ã  ce stade, je suis satisfait et je commence Ã  Ã©crire mon premier article pour prÃ©senter mon blog et je me rends compte que <strong>quand je clique sur un lien,
Ã§a ne l&rsquo;ouvre pas dans un nouvel onglet, et Ã§a, Ã§a m&rsquo;Ã©nerve fort.</strong> ğŸ˜ </p><p>Du coup je cherche un peu et en fait, il me suffit de crÃ©er un petit fichier pour le markup d&rsquo;un lien que j&rsquo;ai placÃ© dans un nouveau fichier <code>themes/PaperMod/layouts/_default/_markup/render-link.html</code>, et hop, problÃ¨me rÃ©solu. ğŸ™‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ .Destination | safeURL }}&#34;</span><span style=color:#960050;background-color:#1e0010>{{</span> <span style=color:#a6e22e>with</span> <span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>Title</span><span style=color:#960050;background-color:#1e0010>}}</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ . }}&#34;</span><span style=color:#960050;background-color:#1e0010>{{</span> <span style=color:#a6e22e>end</span> <span style=color:#960050;background-color:#1e0010>}}{{</span> <span style=color:#a6e22e>if</span> <span style=color:#a6e22e>strings</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>HasPrefix</span> <span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>Destination</span>  <span style=color:#960050;background-color:#1e0010>&#34;</span><span style=color:#a6e22e>http</span><span style=color:#960050;background-color:#1e0010>&#34;</span> <span style=color:#960050;background-color:#1e0010>}}</span> <span style=color:#a6e22e>target</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;_blank&#34;</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;noopener&#34;</span><span style=color:#960050;background-color:#1e0010>{{</span> <span style=color:#a6e22e>end</span> <span style=color:#960050;background-color:#1e0010>}}</span>&gt;{{ .Text | safeHTML }}&lt;/<span style=color:#f92672>a</span>&gt;
</span></span></code></pre></div><p><strong>Et en gros la v1 de mon blog est prÃªte, et Ã§a donne ce que vous avez Ã  l&rsquo;Ã©cran actuellement. ğŸ‰</strong></p><p><img loading=lazy src=/images/gifs/bravo-applause.gif alt=Applaudissements></p><p>Non non je vous en prie, asseyez-vous, il nous reste encore un beau morceau. ğŸ˜</p><h2 id=le-dÃ©ploiement->Le dÃ©ploiement ğŸš€<a hidden class=anchor aria-hidden=true href=#le-dÃ©ploiement->#</a></h2><p>Et oui, c&rsquo;est cool, mais maintenant, il faut le dÃ©ployer. ğŸ˜¬</p><p>C&rsquo;est une Ã©tape qui peut faire peur aux devs, mais ce n&rsquo;est pas si compliquÃ© de dÃ©ployer un site statique aujourd&rsquo;hui,
<strong>je vais vous montrer la mÃ©thode que j&rsquo;utilise pour le blog et que je trouve la plus optimale pour faire Ã§a automatiquement et gratuitement.</strong> ğŸ‘</p><p><strong>(Je vous mets un petit schÃ©ma qui rÃ©capitule tout Ã§a plus bas car c&rsquo;est un peu tricky, accrochez-vous. ğŸ˜‰)</strong>
<img loading=lazy src=/images/gifs/kaamelott-fastoche-ou-pas.gif alt="C&amp;rsquo;est fastoche"></p><h3 id=plusieurs-solutions>Plusieurs solutions<a hidden class=anchor aria-hidden=true href=#plusieurs-solutions>#</a></h3><p>D&rsquo;abord, il faut savoir qu&rsquo;<strong>il y a plusieurs solutions pour hÃ©berger son site</strong>, la premiÃ¨re, la plus traditionnelle, est d&rsquo;utiliser un webserver type nginx ou apache pour faire pointer notre nom de domaine vers le bon dossier sur un serveur dÃ©diÃ© ou un VPS.</p><p>Mais Ã§a demande pas mal de connaissance, notamment gÃ©rer un serveur, savoir comment sÃ©curiser ce dernier, installer un certificat SSL ou certbot etc&mldr; ğŸ˜©</p><p>Donc mÃªme si j&rsquo;ai ces compÃ©tences, <strong>bah flemme</strong>, je veux une solution simple, aujourd&rsquo;hui, il y en a pas mal du genre <a href=https://static.app/ target=_blank rel=noopener>Static.app</a>
ou <a href=https://vercel.com/ target=_blank rel=noopener>Vercel</a>
,
mais ils demandent un peu de config et le tiers gratuit est vite limitÃ© notamment pour les noms de domaine. ğŸ˜•</p><p>Mais il existe encore une autre solution gratuite en tout point : <strong>GitHub Pages</strong> ! ğŸ¤©</p><p>Seul inconvÃ©nient, il faut utiliser GitHub comme repo (dÃ©so les fans de GitLab ğŸ‘€) et surtout <strong>il faut ouvrir publiquement le code du repository qui hÃ©berge le code Ã  exposer sur le net.</strong></p><p><img loading=lazy src=/images/gifs/kaamelott-et-alors.gif alt="Et alors ?"></p><p>Bah alors moi Ã§a me gÃªne car je voudrais pouvoir sauvegarder mes drafts et pas rÃ©vÃ©ler tout mon petit code de mon blog en exposant la version build, d&rsquo;autant que la version build ne fait pas vraiment partie de mon code, donc pas envie qu&rsquo;elle soit dans le repo&mldr; ğŸ¤”</p><p><img loading=lazy src=/images/gifs/kaamelott-on-est-pas-sortis-du-sable.gif alt="On est pas sortis du sable"></p><p>Non mais il y a une solution, pas de panique, il <strong>suffit</strong> (tenez vous bien) d&rsquo;avoir un repo qui n&rsquo;expose <strong>QUE</strong> le code statique,
donc <code>/public</code>, <strong>et activer GitHub pages dessus</strong>. ğŸ¥³</p><p>Pour faire Ã§a et l&rsquo;automatiser, fastoche, l&rsquo;idÃ©e est que quand <strong>je push sur mon repo privÃ©</strong> avec mes nouveaux articles (sur la branche <code>main</code> donc), bah <strong>le repo publique se met Ã  jour tout seul</strong> avec le code statique de mon blog&mldr;. oui facile Ã  dire, j&rsquo;en conviens. ğŸ˜</p><h3 id=github-actions-Ã -la-rescousse>GitHub Actions Ã  la rescousse<a hidden class=anchor aria-hidden=true href=#github-actions-Ã -la-rescousse>#</a></h3><p>GitHub Actions c&rsquo;est le CI/CD de GitHub, c&rsquo;est des petites machines qui peuvent faire plein d&rsquo;Ã©tapes de script, pour valider l&rsquo;Ã©tat des branches en passant des tests unitaires, automatiser des dÃ©ploiements, ce genre de choses&mldr;</p><p><strong>Dans GitHub Actions, on peut faire un peu ce qu&rsquo;on veut</strong>, et c&rsquo;est ce qui est intÃ©ressant. ğŸ‘</p><p>Du coup moi <strong>ce que je veux, c&rsquo;est que quand je push</strong> sur la <code>main</code>, <strong>la pipeline build le blog</strong> (avec le CLI <code>hugo</code>) <strong>et push</strong> le dossier <code>public</code> qui vient d&rsquo;Ãªtre gÃ©nÃ©rÃ© <strong>sur le repo publique</strong>. âœ”ï¸</p><p>Donc aprÃ¨s avoir crÃ©Ã© un repo publique <code>leblogdesam</code> sur GitHub, je vais aller sur mon repo priver prÃ©parer le CI/CD :</p><p>Pour prÃ©parer le pipeline, il faut placer un fichier <code>main.yml</code> (qui correspond au nom de la branche cible) Ã  un emplacement spÃ©cifique (<code>.github/workflows/main.yml</code>) du projet pour qu&rsquo;il soit prit en compte, et dedans, j&rsquo;ai mis ce code :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># /.github/workflows/main.yml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Blog Deployment</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>workflow_dispatch</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build and Deploy</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>permissions</span>: <span style=color:#ae81ff>write-all</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>ğŸ›’ Checkout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>persist-credentials</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>âœ¨ Setup Hugo</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>HUGO_VERSION</span>: <span style=color:#ae81ff>0.114.0</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          mkdir ~/hugo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          cd ~/hugo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          curl -L &#34;https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz&#34; --output hugo.tar.gz
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          tar -xvzf hugo.tar.gz
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          sudo mv hugo /usr/local/bin          </span>          
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>ğŸ› ï¸ Build</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>ğŸš€ Deploy</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>DOMAIN</span>: <span style=color:#ae81ff>www.leblogdesam.net</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          cd public
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git config --global init.defaultBranch main
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git init
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git config user.name &#34;Samuel NAIT&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git config user.email &#34;nait.samuel@gmail.com&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git remote add origin https://Tisamu:${{ secrets.GH_TOKEN }}@github.com/Tisamu/leblogdesam.git
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo &#34;${DOMAIN}&#34; &gt; CNAME
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git add -f ./
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git commit -m &#34;ğŸš€ Deploy the blog&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git push origin HEAD:main --force</span>          
</span></span></code></pre></div><p>(Oui bah, j&rsquo;avais dit que ce serait un peu plus technique. ğŸ‘€)</p><p><img loading=lazy src=/images/gifs/kaamelott-pas-pige-un-broc.gif alt=kaamelott-pas-pige-un-broc.gif></p><p>Ok, on y va par Ã©tape :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Blog Deployment</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>workflow_dispatch</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build and Deploy</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>permissions</span>: <span style=color:#ae81ff>write-all</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>ğŸ›’ Checkout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>persist-credentials</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>âœ¨ Setup Hugo</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>HUGO_VERSION</span>: <span style=color:#ae81ff>0.114.0</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          mkdir ~/hugo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          cd ~/hugo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          curl -L &#34;https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz&#34; --output hugo.tar.gz
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          tar -xvzf hugo.tar.gz
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          sudo mv hugo /usr/local/bin          </span>          
</span></span></code></pre></div><p><strong>D&rsquo;abord je dÃ©finis le pipeline</strong>, et je dis qu&rsquo;il se dÃ©clenche (trigger) quand on push sur la main.<br>(C&rsquo;est la partie <code>on:</code>)</p><p>Ensuite la premiÃ¨re Ã©tape (<code>steps</code>) c&rsquo;est de <strong>checkout</strong>, c&rsquo;est un job de GitHub Actions qui lui permet de <strong>rÃ©cupÃ©rer le repo du projet</strong>, tout simplement.</p><p>Ensuite <strong>on va rÃ©cupÃ©rer le livrable d&rsquo;Hugo</strong>, et l&rsquo;installer pour pouvoir builder le projet (l&rsquo;Ã©tape <code>âœ¨ Setup Hugo</code>). ğŸ‘</p><p>Et pour finir :</p><pre tabindex=0><code>      - name: ğŸ› ï¸ Build
        run: hugo --minify

      - name: ğŸš€ Deploy
        env:
          DOMAIN: www.leblogdesam.net
        run: |
          cd public
          git config --global init.defaultBranch main
          git init
          git config user.name &#34;Samuel NAIT&#34;
          git config user.email &#34;nait.samuel@gmail.com&#34;
          git remote add origin https://Tisamu:${{ secrets.GH_TOKEN }}@github.com/Tisamu/leblogdesam.git
          echo &#34;${DOMAIN}&#34; &gt; CNAME
          git add -f ./
          git commit -m &#34;ğŸš€ Deploy the blog&#34;
          git push origin HEAD:main --force
</code></pre><p>LÃ , <strong>on build le blog</strong>, donc on gÃ©nÃ¨re le dossier <code>public</code> grÃ¢ce Ã  la commande <code>hugo --minify</code>.</p><p>Et <strong>on va dans ce dossier, on en fait un repo git</strong> (<code>git init</code> etc &mldr;) et <strong>on le branche sur notre repo publique</strong> distant en utilisant un token d&rsquo;API GitHub <code>${{ secrets.GH_TOKEN }}</code>
(que j&rsquo;ai gÃ©nÃ©rÃ© et indiquÃ© dans les settings du Repository privÃ©, celui qui porte ce pipeline).</p><p>Et enfin, <strong>il commit et push sur le repo publique</strong>, avant Ã§a on voit une petite Ã©tape <code>echo "${DOMAIN}" > CNAME</code>, je vais y revenir plus loin, c&rsquo;est pour faire pointer mon nom de domaine <a href=https://www.leblogdesam.net target=_blank rel=noopener>www.leblogdesam.net</a>
sur le GitHub pages du repo. ğŸ‘€</p><p><strong>Et voilÃ , Ã  ce stade, dÃ¨s que je push sur mon repo privÃ©, Ã§a dÃ©clenche tout Ã§a et Ã§a fini dans mon repo publique ! ğŸ‰</strong></p><h3 id=le-petit-schÃ©ma-comme-promis>Le petit schÃ©ma comme promis<a hidden class=anchor aria-hidden=true href=#le-petit-schÃ©ma-comme-promis>#</a></h3><p>Vous pouvez voir le schÃ©ma en full size <a href=https://www.leblogdesam/images/schema.png target=_blank rel=noopener>ici</a>
<img loading=lazy src=/images/schema.png alt=schema.png></p><p>(Petite cafouille entre le nom du dossier public / static mais je suis sÃ»r que vous me pardonnerez. ğŸ¥²)</p><h3 id=github-pages>GitHub Pages<a hidden class=anchor aria-hidden=true href=#github-pages>#</a></h3><p>Ã€ ce stade, on a tout ce qu&rsquo;il faut pour rendre notre site visible.</p><p>C&rsquo;est donc du cÃ´tÃ© du repo public, dans la catÃ©gorie &ldquo;GitHub Pages&rdquo; qu&rsquo;il ne nous reste plus qu&rsquo;Ã  activer ce dernier. ğŸ˜</p><p>Donc lÃ , on fait rÃ©fÃ©rence Ã  la partie en haut Ã  droite du schÃ©ma, dans Settings > Pages.</p><p>Vous verrez que quand vous l&rsquo;activez, vous pouvez dÃ©jÃ  y accÃ©der via votre url github pages fournie par GitHub.</p><h2 id=nom-de-domaine-personnalisÃ©>Nom de domaine personnalisÃ©<a hidden class=anchor aria-hidden=true href=#nom-de-domaine-personnalisÃ©>#</a></h2><p>Mais si vous voulez utiliser un nom de domaine personnalisÃ© comme moi, Ã§a va vous demander un chouÃ¯a plus de connaissances. ğŸ™‚</p><h3 id=configurer-son-nom-de-domaine>Configurer son nom de domaine<a hidden class=anchor aria-hidden=true href=#configurer-son-nom-de-domaine>#</a></h3><p>Je ne vais pas aller en dÃ©tails sur le fonctionnement des DNS et noms de domaines, (j&rsquo;en ferais peut-Ãªtre un article si Ã§a vous intÃ©resse),
mais lÃ  ce qui compte, c&rsquo;est de vous <strong>trouver un fournisseur et un nom de domaine</strong>.</p><p>Perso, je ne jure que par OVH pour Ã§a, mais c&rsquo;est simplement par habitude, si vous cherchez &ldquo;Acheter nom de domaine&rdquo; sur Google vous en
trouverez plein d&rsquo;autres, et certainement moins chers. ğŸ‘</p><p>Donc pour faire mes emplettes, je vais donc sur OVH, et je commande mon petit nom de domaine (process d&rsquo;achat standard d&rsquo;internet, pas de surprises.)</p><p><img loading=lazy src=/images/ovh-achat-domaine.png alt="Page d&amp;rsquo;achat nom de domaine OVH"></p><p>Une fois votre nom de domaine achetÃ©, il faut attendre un peu qu&rsquo;il soit activÃ©.</p><p>Une fois dispo, vous le retrouverez sur votre espace Web Cloud, <strong>et lÃ  vous pourrez tout brancher</strong>.</p><h3 id=comment-Ã§a-marche->Comment Ã§a marche ?<a hidden class=anchor aria-hidden=true href=#comment-Ã§a-marche->#</a></h3><p>Petite parenthÃ¨se tech : pour que votre site soit visible sur votre nom de domaine, <strong>il faut le rediriger (ou faire pointer)</strong> dessus.</p><p>Un nom de domaine peut avoir autant de sous domaines que vous voulez : leblogdesam.net est le nom de domaine (ou domaine parent), la partie <code>www</code> de <code>www.leblogdesam.net</code> est un sous domaine <code>www</code> du domaine <code>leblogdesam.net</code></p><p>Si un jour je dev une API pour le blog, elle sera certainement hÃ©bergÃ©e ssur le sous domaine <code>api</code> et sera donc pointÃ©e par <code>api.leblogdesam.net</code>. ğŸ‘</p><p>VoilÃ  pour la structure d&rsquo;un nom de domaine. ğŸ™‚</p><p>Concernant les enregistrements de redirection, il y en a plusieurs types : A, AAAA, TXT et CNAME pour les principales, mais il y en a plein d&rsquo;autres encore dont on se fiche&mldr;</p><p>Alors, intuitif hein ? ğŸ˜</p><p><img loading=lazy src=/images/gifs/oui-mais-pas-du-tout.gif alt="Alors oui, mais pas du tout"></p><p>Je vous l&rsquo;accorde en effet, pour faire simple :</p><ul><li>A = Redirection sur une IPv4, port 80 en http et 443 en https.</li><li>AAAA = Pareil mais avec une IPv6</li><li>CNAME = Redirection canonique, en gros, c&rsquo;est <strong>un alias qui pointe vers un autre nom de domaine</strong></li><li>TXT = Un type flexible, car il prend du plain text, il permet de communiquer des informations aux serveurs DNS ou permettre des redirections pour des outils type analytics,
ou bien des redirections entre sous domaines de notre domaine, ce genre de choses.</li></ul><p>Donc lÃ  pour savoir sur quoi pointer, on peut retourner cÃ´tÃ© GitHub et activer Pages, et mettre notre nom de domaine dans &ldquo;Custom Domain&rdquo; :</p><p>(vous pouvez cocher &ldquo;Enforce HTTPS&rdquo; pour forcer l&rsquo;utilisation du https au passage, Ã§a ne coute rien ğŸ˜‰).
<img loading=lazy src=/images/github-pages.png alt="GitHub Pages"></p><p>Et lÃ , l&rsquo;important c&rsquo;est que Pages nous dit <strong>&ldquo;Custom domains allow you to serve your site from a domain other than .github.io&rdquo;</strong></p><p>Et Ã§a, Ã§a veut dire qu&rsquo;on veut que notre domaine pointe sur le domaine <code>&lt;votre username>.github.io</code>, donc si vous avez bien suivie, on veut une redirection&mldr; <strong>CNAME</strong> !</p><p>Du coup pour ce faire, on peut retourner sur OVH et aller modifier la zone DNS de notre nom de domaine :</p><p><img loading=lazy src=/images/ovh-zone-dns.png alt="Page Zone DNS du nom de domaine"></p><p>Vous aurez un peu de nettoyage Ã  faire, car la plupart du temps OVH vous fournit quelques redirections vers les pages par dÃ©faut OVH qui ne vous serviront plus.</p><p>Mais lÃ  si on regarde la liste, on voit qu&rsquo;il ne me reste que <strong>deux redirections NS</strong> (pour les serveurs DNS d&rsquo;OVH, faut pas y toucher),
<strong>deux MX</strong> (indispensable au fonctionnement du serveur mail, je vous conseille de les garder),</p><p><strong>Ensuite, plus intÃ©ressant, une TXT pour rediriger le domaine parent vers le sous domaine www.</strong></p><p><strong>Et enfin ma redirection CNAME de <code>www</code> vers mon domaine github pages.</strong></p><blockquote><p>(N&rsquo;oubliez pas d&rsquo;ajouter un point &ldquo;.&rdquo; Ã  la redirection, pour cloisonner l&rsquo;enregistrement,
genre <code>&lt;votre username>.github.io.</code> et pas juste <code>&lt;votre username>.github.io</code>,
OVH le fait automatiquement, mais pas sÃ»r que ce soit pareil partout) ğŸ«¤</p></blockquote><p>C&rsquo;est possible que cÃ´tÃ© Pages, il reste en mode &ldquo;checking &mldr;&rdquo;, voire qu&rsquo;il vous dise que c&rsquo;est &ldquo;improperly configured&rdquo; mais ce n&rsquo;est rien, de mon cÃ´tÃ© Ã§a fait Ã§a et Ã§a fonctionne quand mÃªme ğŸ‘€</p><h3 id=le-fichier-cname>Le fichier CNAME<a hidden class=anchor aria-hidden=true href=#le-fichier-cname>#</a></h3><p><strong>Tout Ã  l&rsquo;heure, on a vu un fichier CNAME dans nos histoires de pipeline, je vous ai dit qu&rsquo;on y reviendrait.</strong></p><p>Pour faire simple, quand vous activez Pages, il ajoute ce fichier Ã  la racine de votre repo pour indiquer aux serveurs Github Pages comment traiter la redirection.</p><p>Par dÃ©faut, il contient une IP de serveur github pages, mais une fois le nom de domaine configurÃ©, il contient le nom de domaine en question. ğŸ‘</p><p>Seulement, vu que ce fichier est indispensable au branchement du nom de domaine,
on doit s&rsquo;assurer de ne pas le supprimer quand on push notre repo, sinon ğŸ’¥ plus de site !</p><p><strong>C&rsquo;est pour cela que je le recrÃ©e dans le pipeline GitHub Actions &ldquo;Ã  la main&rdquo; Ã  chaque deploy. ğŸ™‚</strong></p><p><img loading=lazy src=/images/gifs/and-done.gif alt="Et c&amp;rsquo;est fini !"></p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>En bref, pour moi cette solution est un nobrainer car facile Ã  comprendre, mettre en place et aucune maintenance. ğŸ˜</p><p><strong>Ici, j&rsquo;ai essayÃ© de vous l&rsquo;expliquer avec un format entre le tuto dÃ©taillÃ© et le guide pratique, j&rsquo;espÃ¨re que cette solution vous a sÃ©duit et vous donnera envie de mettre en ligne tout plein de sites facilement. ğŸ˜</strong></p><p><em>Ã€ la prochaine !</em> ğŸ‘‹</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.leblogdesam.net/tags/dev/>Dev</a></li><li><a href=https://www.leblogdesam.net/tags/guide/>Guide</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Comment j'ai Dev mon Blog ğŸŒ on twitter" href="https://twitter.com/intent/tweet/?text=Comment%20j%27ai%20Dev%20mon%20Blog%20%f0%9f%8c%90&amp;url=https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f&amp;hashtags=Dev%2cGuide"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Comment j'ai Dev mon Blog ğŸŒ on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f&amp;title=Comment%20j%27ai%20Dev%20mon%20Blog%20%f0%9f%8c%90&amp;summary=Comment%20j%27ai%20Dev%20mon%20Blog%20%f0%9f%8c%90&amp;source=https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Comment j'ai Dev mon Blog ğŸŒ on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f&title=Comment%20j%27ai%20Dev%20mon%20Blog%20%f0%9f%8c%90"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Comment j'ai Dev mon Blog ğŸŒ on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Comment j'ai Dev mon Blog ğŸŒ on whatsapp" href="https://api.whatsapp.com/send?text=Comment%20j%27ai%20Dev%20mon%20Blog%20%f0%9f%8c%90%20-%20https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Comment j'ai Dev mon Blog ğŸŒ on telegram" href="https://telegram.me/share/url?text=Comment%20j%27ai%20Dev%20mon%20Blog%20%f0%9f%8c%90&amp;url=https%3a%2f%2fwww.leblogdesam.net%2fposts%2fcomment-jai-dev-mon-blog%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><div style=color:#000!important;display:flex><div style=margin:auto><script type=text/javascript src=https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js data-name=bmc-button data-slug=samuelnait data-color=#FFDD00 data-emoji=ğŸº data-font=Bree data-text="Paie-moi une pinte" data-outline-color=#000000 data-font-color=#000000 data-coffee-color=#ffffff></script></div></div><footer class=footer><span>&copy; 2023 <a href=https://www.leblogdesam.net>Le blog de Sam</a> -</span>
<span>PropulsÃ© par
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script>const images=Array.from(document.querySelectorAll(".post-content img"));images.forEach(e=>{mediumZoom(e,{margin:0,scrollOffset:40,container:null,template:null})})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copier";function s(){t.innerHTML="CopiÃ© !",setTimeout(()=>{t.innerHTML="Copier"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>